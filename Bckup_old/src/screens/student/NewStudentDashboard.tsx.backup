/**
 * NewStudentDashboard - Premium Minimal Design
 * Purpose: Modern student dashboard with 8 sections and real Supabase data
 * Features: 56dp header, 92% content area, all accessibility labels
 *
 * Sections:
 * 1. Compact Header (56dp frozen)
 * 2. Welcome Summary (collapsible)
 * 3. Today's Classes (horizontal carousel)
 * 4. Assignments Due (compact list)
 * 5. Smart Recommendations (single card)
 * 6. Recent Activity (compact timeline)
 * 7. Quick Access Bar (horizontal scroll)
 * 8. Learning Progress (inline widget)
 */

import React, { useEffect, useState } from 'react';
import { ScrollView, View, TouchableOpacity, RefreshControl, StyleSheet, Alert } from 'react-native';
import { useQuery } from '@tanstack/react-query';
import type { NativeStackScreenProps } from '@react-navigation/native-stack';
import { BaseScreen } from '../../shared/components/BaseScreen';
import { Col, T, Spacer, Row, Button } from '../../ui';
import { Badge } from '../../ui';
import { Card } from '../../ui';
import { trackScreenView, trackAction } from '../../utils/navigationAnalytics';
import { safeNavigate } from '../../utils/navigationService';
import { supabase } from '../../lib/supabase';
import { useAuth } from '../../context/AuthContext';
import { EventCard, AssignmentCard, HorizontalCarousel } from '../../components/student/molecules/premium';
import { StatCard, QuickAccessButton } from '../../components/student/molecules';
import { Colors, Spacing } from '../../theme/designSystem';

type Props = NativeStackScreenProps<any, 'NewStudentDashboard'>;

const NewStudentDashboard: React.FC<Props> = ({ navigation }) => {
  const { user } = useAuth();
  const studentId = user?.id || 'test-student-id';

  // Track screen view
  useEffect(() => {
    trackScreenView('NewStudentDashboard', { userId: studentId });
  }, [studentId]);

  // ========================================
  // SECTION 1: Summary Stats Query
  // ========================================
  const { data: summary, isLoading: summaryLoading, refetch: refetchSummary } = useQuery({
    queryKey: ['dashboard-summary', studentId],
    queryFn: async () => {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);

      try {
        // First get student's batch_id
        const { data: student } = await supabase
          .from('students')
          .select('batch_id, attendance_percentage, assignments_completed, total_assignments')
          .eq('id', studentId)
          .single();

        const batchId = student?.batch_id;

        const [classCount, assignmentCount] = await Promise.all([
          // Count today's live sessions for student's batch
          supabase
            .from('live_sessions')
            .select('id', { count: 'exact', head: true })
            .eq('class_id', batchId)
            .gte('scheduled_start_at', today.toISOString())
            .lt('scheduled_start_at', tomorrow.toISOString()),

          // Count published assignments for student's batch
          supabase
            .from('assignments')
            .select('id', { count: 'exact', head: true })
            .eq('class_id', batchId)
            .eq('status', 'published')
            .gte('due_date', today.toISOString()),
        ]);

        return {
          classCount: classCount.count || 0,
          assignmentCount: assignmentCount.count || 0,
          attendance: Math.round(student?.attendance_percentage || 0),
          streak: 0, // TODO: Implement streak tracking
        };
      } catch (error) {
        console.error('Error fetching summary:', error);
        return {
          classCount: 0,
          assignmentCount: 0,
          attendance: 0,
          streak: 0,
        };
      }
    },
  });

  // ========================================
  // SECTION 2: Today's Classes Query
  // ========================================
  const { data: todaysClasses, isLoading: classesLoading, refetch: refetchClasses } = useQuery({
    queryKey: ['today-classes', studentId],
    queryFn: async () => {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);

      try {
        // First get student's batch_id
        const { data: student } = await supabase
          .from('students')
          .select('batch_id')
          .eq('id', studentId)
          .single();

        if (!student?.batch_id) return [];

        const { data, error } = await supabase
          .from('live_sessions')
          .select('*')
          .eq('class_id', student.batch_id)
          .gte('scheduled_start_at', today.toISOString())
          .lt('scheduled_start_at', tomorrow.toISOString())
          .order('scheduled_start_at', { ascending: true })
          .limit(3);

        if (error) throw error;
        return data || [];
      } catch (error: any) {
        console.error('Error fetching today\'s classes:', {
          message: error?.message || 'Unknown error',
          code: error?.code,
          details: error?.details,
          hint: error?.hint,
          fullError: JSON.stringify(error, null, 2),
        });
        return [];
      }
    },
  });

  // ========================================
  // SECTION 3: Pending Assignments Query
  // ========================================
  const { data: pendingAssignments, isLoading: assignmentsLoading, refetch: refetchAssignments } = useQuery({
    queryKey: ['pending-assignments', studentId],
    queryFn: async () => {
      try {
        // First get student's batch_id
        const { data: student } = await supabase
          .from('students')
          .select('batch_id')
          .eq('id', studentId)
          .single();

        if (!student?.batch_id) return [];

        const { data, error } = await supabase
          .from('assignments')
          .select('*')
          .eq('class_id', student.batch_id)
          .eq('status', 'published')
          .gte('due_date', new Date().toISOString())
          .order('due_date', { ascending: true })
          .limit(3);

        if (error) throw error;
        return data || [];
      } catch (error) {
        console.error('Error fetching pending assignments:', error);
        return [];
      }
    },
  });

  // ========================================
  // SECTION 4: Smart Recommendation Query
  // ========================================
  const { data: recommendation, isLoading: recommendationLoading } = useQuery({
    queryKey: ['smart-recommendation', studentId],
    queryFn: async () => {
      // Disabled: ai_insights table schema mismatch
      return null;
    },
  });

  // ========================================
  // SECTION 5: Recent Activities Query
  // ========================================
  const { data: recentActivities, isLoading: activitiesLoading } = useQuery({
    queryKey: ['recent-activities', studentId],
    queryFn: async () => {
      // Disabled: user_activities query returns no data for this student
      return [];
    },
  });

  // ========================================
  // SECTION 6: Learning Progress Query
  // ========================================
  const { data: learningProgress, isLoading: progressLoading } = useQuery({
    queryKey: ['learning-progress', studentId],
    queryFn: async () => {
      try {
        // Use student_progress table or calculate from assignments
        const { data: student } = await supabase
          .from('students')
          .select('assignments_completed, total_assignments, overall_grade')
          .eq('id', studentId)
          .single();

        if (!student) return null;

        return {
          assignments_completed: student.assignments_completed || 0,
          total_assignments: student.total_assignments || 0,
          overall_grade: student.overall_grade || 0,
          completion_percentage: student.total_assignments
            ? Math.round((student.assignments_completed / student.total_assignments) * 100)
            : 0,
        };
      } catch (error) {
        console.error('Error fetching learning progress:', error);
        return null;
      }
    },
  });

  // ========================================
  // NEW FEATURE 1: Performance Chart Data
  // ========================================
  const { data: performanceData } = useQuery({
    queryKey: ['performance-chart', studentId],
    queryFn: async () => {
      // Disabled: test_results table doesn't exist
      return [];
    },
  });

  // ========================================
  // NEW FEATURE 2: Upcoming Events Calendar
  // ========================================
  const { data: upcomingEvents } = useQuery({
    queryKey: ['upcoming-events', studentId],
    queryFn: async () => {
      // Disabled: calendar_events table doesn't exist
      return [];
    },
  });

  // ========================================
  // NEW FEATURE 3: Notifications Panel
  // ========================================
  const { data: notifications } = useQuery({
    queryKey: ['notifications', studentId],
    queryFn: async () => {
      // Disabled: notifications.student_id column doesn't exist
      return [];
    },
  });

  // ========================================
  // NEW FEATURE 4: Teacher Announcements
  // ========================================
  const { data: announcements } = useQuery({
    queryKey: ['teacher-announcements', studentId],
    queryFn: async () => {
      // Disabled: announcements/teachers relationship doesn't exist
      return [];
    },
  });

  // ========================================
  // NEW FEATURE 5: Study Goals Tracker
  // ========================================
  const { data: studyGoals } = useQuery({
    queryKey: ['study-goals', studentId],
    queryFn: async () => {
      // Disabled: student_goals table doesn't exist
      return [];
    },
  });

  // Handlers for new features
  const handleMarkNotificationRead = (notificationId: string) => {
    trackAction('mark_notification_read', 'NewStudentDashboard', { notificationId });
    Alert.alert('Notification', 'Marked as read');
  };

  const handleCompleteGoal = (goalId: string) => {
    trackAction('complete_study_goal', 'NewStudentDashboard', { goalId });
    Alert.alert('Goal Complete', 'Congratulations on completing your goal!');
  };

  // Combined loading state
  const isLoading = summaryLoading || classesLoading || assignmentsLoading;

  // Combined refetch function
  const refetchAll = () => {
    refetchSummary();
    refetchClasses();
    refetchAssignments();
  };

  // Get class status
  const getClassStatus = (classItem: any): 'live' | 'upcoming' | 'ended' => {
    const now = new Date();
    const startTime = new Date(classItem.start_time);
    const endTime = new Date(classItem.end_time);

    if (now >= startTime && now <= endTime) {
      return 'live';
    } else if (now < startTime) {
      return 'upcoming';
    } else {
      return 'ended';
    }
  };

  return (
    <BaseScreen loading={isLoading} error={null} empty={!summary}>
      <ScrollView
        refreshControl={
          <RefreshControl refreshing={isLoading} onRefresh={refetchAll} />
        }
        style={styles.scrollView}
      >
        <Col sx={{ p: 'xl', gap: 'lg' }}>
          {/* ========================================
              SECTION 1: Welcome Summary
              ======================================== */}
          <View style={styles.welcomeSection}>
            <T variant="title" weight="bold">
              Good morning, {user?.email?.split('@')[0] || 'Student'}! ðŸ‘‹
            </T>
            <Spacer size="xs" />
            <T variant="caption" style={styles.summaryText}>
              {summary?.classCount || 0} classes Â· {summary?.assignmentCount || 0} assignments due Â· {summary?.attendance || 0}% attendance
            </T>
            {summary?.streak ? (
              <>
                <Spacer size="xs" />
                <T variant="caption" style={styles.streakText}>
                  ðŸ”¥ {summary.streak} day streak
                </T>
              </>
            ) : null}
          </View>

          {/* ========================================
              SECTION 2: Today's Classes Carousel
              ======================================== */}
          {todaysClasses && todaysClasses.length > 0 ? (
            <View>
              <T variant="body" weight="semiBold">Today's Classes</T>
              <Spacer size="sm" />
              <HorizontalCarousel
                data={todaysClasses}
                renderItem={(classItem) => (
                  <EventCard
                    title={classItem.subjects?.name || 'Class'}
                    subject={classItem.subjects?.code || ''}
                    time={new Date(classItem.start_time)}
                    status={getClassStatus(classItem)}
                    onPress={() => {
                      trackAction('view_class', 'NewStudentDashboard', { classId: classItem.id });
                      safeNavigate('ClassDetail', { classId: classItem.id });
                    }}
                    accessibilityLabel={`${classItem.subjects?.name} class at ${new Date(classItem.start_time).toLocaleTimeString()}, ${getClassStatus(classItem)}`}
                  />
                )}
                accessibilityLabel="Today's classes"
              />
            </View>
          ) : null}

          {/* ========================================
              SECTION 3: Assignments Due
              ======================================== */}
          {pendingAssignments && pendingAssignments.length > 0 ? (
            <View>
              <Row sx={{ justifyContent: 'space-between', alignItems: 'center' }}>
                <T variant="body" weight="semiBold">Assignments Due</T>
                <TouchableOpacity
                  onPress={() => {
                    trackAction('view_all_assignments', 'NewStudentDashboard');
                    safeNavigate('AssignmentDetail');
                  }}
                  accessibilityRole="button"
                  accessibilityLabel="View all assignments"
                  style={styles.viewAllButton}
                >
                  <T variant="caption" style={styles.viewAllText}>View All â†’</T>
                </TouchableOpacity>
              </Row>
              <Spacer size="sm" />
              {pendingAssignments.map((assignment) => (
                <TouchableOpacity
                  key={assignment.id}
                  onPress={() => {
                    trackAction('view_assignment', 'NewStudentDashboard', { assignmentId: assignment.id });
                    safeNavigate('AssignmentDetail', { assignmentId: assignment.id });
                  }}
                  accessibilityRole="button"
                  accessibilityLabel={`${assignment.title} assignment, due ${new Date(assignment.due_date).toLocaleDateString()}`}
                  style={styles.assignmentItem}
                >
                  <T variant="body">â€¢ {assignment.title}</T>
                  <T variant="caption" style={styles.dueDate}>
                    Due: {new Date(assignment.due_date).toLocaleDateString()}
                  </T>
                </TouchableOpacity>
              ))}
            </View>
          ) : null}

          {/* ========================================
              SECTION 4: Smart Recommendation
              ======================================== */}
          {recommendation ? (
            <View style={styles.recommendationCard}>
              <Row sx={{ gap: 'sm', alignItems: 'center' }}>
                <T variant="title">ðŸ’¡</T>
                <T variant="body" weight="semiBold">Smart Recommendation</T>
              </Row>
              <Spacer size="sm" />
              <T variant="body">{recommendation.message || 'Stay focused on your studies!'}</T>
              <Spacer size="md" />
              <Button
                variant="primary"
                onPress={() => {
                  trackAction('start_recommendation', 'NewStudentDashboard');
                  safeNavigate('AIStudy');
                }}
                accessibilityLabel="Start recommended practice"
                accessibilityHint="Double tap to begin AI-powered study session"
              >
                Start Practice
              </Button>
            </View>
          ) : null}

          {/* ========================================
              SECTION 5: Recent Activity
              ======================================== */}
          {recentActivities && recentActivities.length > 0 ? (
            <View>
              <T variant="body" weight="semiBold">Recent Activity</T>
              <Spacer size="sm" />
              {recentActivities.map((activity) => (
                <View key={activity.id} style={styles.activityItem}>
                  <T variant="caption" style={styles.activityTime}>
                    {new Date(activity.created_at).toLocaleTimeString()} â€¢
                  </T>
                  <T variant="caption">{activity.description}</T>
                </View>
              ))}
            </View>
          ) : null}

          {/* ========================================
              SECTION 6: Quick Access Bar
              ======================================== */}
          <View>
            <T variant="body" weight="semiBold">Quick Access</T>
            <Spacer size="sm" />
            <Row sx={{ gap: 'md', flexWrap: 'wrap' }}>
              <QuickAccessButton
                icon="ðŸ“š"
                label="Library"
                onPress={() => {
                  trackAction('quick_access_library', 'NewStudentDashboard');
                  safeNavigate('NewStudyLibraryScreen');
                }}
              />
              <QuickAccessButton
                icon="â“"
                label="Ask"
                onPress={() => {
                  trackAction('quick_access_doubt', 'NewStudentDashboard');
                  safeNavigate('NewSimpleDoubt');
                }}
              />
              <QuickAccessButton
                icon="ðŸ“…"
                label="Schedule"
                onPress={() => {
                  trackAction('quick_access_schedule', 'NewStudentDashboard');
                  safeNavigate('NewScheduleScreen');
                }}
              />
              <QuickAccessButton
                icon="ðŸ¤–"
                label="AI"
                onPress={() => {
                  trackAction('quick_access_ai', 'NewStudentDashboard');
                  safeNavigate('NewEnhancedAIStudy');
                }}
              />
              <QuickAccessButton
                icon="ðŸ‘¥"
                label="Peers"
                onPress={() => {
                  trackAction('quick_access_peers', 'NewStudentDashboard');
                  safeNavigate('NewPeerLearningNetwork');
                }}
              />
            </Row>
          </View>

          {/* ========================================
              SECTION 7: Learning Progress
              ======================================== */}
          {learningProgress ? (
            <TouchableOpacity
              onPress={() => {
                trackAction('view_learning_hub', 'NewStudentDashboard');
                safeNavigate('GamifiedHub');
              }}
              accessibilityRole="button"
              accessibilityLabel={`Learning progress: Level ${learningProgress.level}, ${learningProgress.xp} XP`}
              style={styles.progressCard}
            >
              <T variant="body" weight="semiBold">
                ðŸŽ¯ Learning Hub: Level {learningProgress.level} Â· {learningProgress.xp} XP
              </T>
              <Spacer size="xs" />
              <View style={styles.progressBar}>
                <View
                  style={[
                    styles.progressFill,
                    { width: `${(learningProgress.xp % 1000) / 10}%` }
                  ]}
                />
              </View>
              <T variant="caption" style={styles.progressText}>
                {(learningProgress.xp % 1000) / 10}% to next level
              </T>
            </TouchableOpacity>
          ) : null}

          {/* ========================================
              NEW FEATURE 1: Performance Chart
              ======================================== */}
          {performanceData && performanceData.length > 0 ? (
            <Card style={styles.performanceCard}>
              <T variant="body" weight="semiBold">ðŸ“Š Weekly Performance</T>
              <Spacer size="sm" />
              <View style={styles.chartContainer}>
                {performanceData.map((data, index) => (
                  <View key={index} style={styles.chartBar}>
                    <View style={styles.barContainer}>
                      <View style={[styles.bar, { height: `${data.average}%` }]} />
                    </View>
                    <T variant="caption" style={styles.chartLabel}>{data.day}</T>
                    <T variant="caption" style={styles.chartValue}>{data.average}%</T>
                  </View>
                ))}
              </View>
            </Card>
          ) : null}

          {/* ========================================
              NEW FEATURE 2: Upcoming Events Calendar
              ======================================== */}
          {upcomingEvents && upcomingEvents.length > 0 ? (
            <View>
              <T variant="body" weight="semiBold">ðŸ“… Upcoming Events (Next 5 Days)</T>
              <Spacer size="sm" />
              {upcomingEvents.map((event) => (
                <Card key={event.id} style={styles.eventCard}>
                  <Row sx={{ justifyContent: 'space-between', alignItems: 'center' }}>
                    <View style={{ flex: 1 }}>
                      <T variant="body" weight="semiBold">{event.title}</T>
                      <T variant="caption" style={styles.eventSubject}>
                        {event.subjects?.name || 'General'}
                      </T>
                    </View>
                    <Badge
                      variant="info"
                      label={new Date(event.event_date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                    />
                  </Row>
                  {event.description ? (
                    <T variant="caption" style={styles.eventDescription}>{event.description}</T>
                  ) : null}
                </Card>
              ))}
            </View>
          ) : null}

          {/* ========================================
              NEW FEATURE 3: Notifications Panel
              ======================================== */}
          {notifications && notifications.length > 0 ? (
            <Card style={styles.notificationsCard}>
              <Row sx={{ justifyContent: 'space-between', alignItems: 'center' }}>
                <T variant="body" weight="semiBold">ðŸ”” Notifications</T>
                <Badge variant="error" label={`${notifications.length} new`} />
              </Row>
              <Spacer size="sm" />
              {notifications.map((notification) => (
                <TouchableOpacity
                  key={notification.id}
                  style={styles.notificationItem}
                  onPress={() => handleMarkNotificationRead(notification.id)}
                  accessibilityRole="button"
                  accessibilityLabel={`Notification: ${notification.title}`}
                >
                  <View style={styles.notificationDot} />
                  <View style={{ flex: 1 }}>
                    <T variant="body" weight="semiBold">{notification.title}</T>
                    <T variant="caption" style={styles.notificationMessage}>
                      {notification.message}
                    </T>
                    <T variant="caption" style={styles.notificationTime}>
                      {new Date(notification.created_at).toLocaleTimeString()}
                    </T>
                  </View>
                </TouchableOpacity>
              ))}
            </Card>
          ) : null}

          {/* ========================================
              NEW FEATURE 4: Teacher Announcements
              ======================================== */}
          {announcements && announcements.length > 0 ? (
            <View>
              <T variant="body" weight="semiBold">ðŸ“¢ Teacher Announcements</T>
              <Spacer size="sm" />
              {announcements.map((announcement) => (
                <Card key={announcement.id} style={styles.announcementCard}>
                  <Row sx={{ justifyContent: 'space-between', alignItems: 'flex-start' }}>
                    <View style={{ flex: 1 }}>
                      <T variant="body" weight="semiBold">{announcement.title}</T>
                      <T variant="caption" style={styles.announcementTeacher}>
                        By {announcement.teachers?.name || 'Teacher'}
                      </T>
                    </View>
                    <Badge
                      variant="warning"
                      label={new Date(announcement.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                    />
                  </Row>
                  <Spacer size="xs" />
                  <T variant="caption" style={styles.announcementContent}>
                    {announcement.content}
                  </T>
                </Card>
              ))}
            </View>
          ) : null}

          {/* ========================================
              NEW FEATURE 5: Study Goals Tracker
              ======================================== */}
          {studyGoals && studyGoals.length > 0 ? (
            <Card style={styles.goalsCard}>
              <T variant="body" weight="semiBold">ðŸŽ¯ Study Goals</T>
              <Spacer size="sm" />
              {studyGoals.map((goal) => {
                const progress = Math.round((goal.current_value / goal.target_value) * 100);
                return (
                  <View key={goal.id} style={styles.goalItem}>
                    <Row sx={{ justifyContent: 'space-between', alignItems: 'center' }}>
                      <View style={{ flex: 1 }}>
                        <T variant="body" weight="semiBold">{goal.title}</T>
                        <T variant="caption" style={styles.goalDeadline}>
                          Due: {new Date(goal.deadline).toLocaleDateString()}
                        </T>
                      </View>
                      <Badge
                        variant={progress >= 100 ? 'success' : progress >= 50 ? 'info' : 'warning'}
                        label={`${progress}%`}
                      />
                    </Row>
                    <Spacer size="xs" />
                    <View style={styles.goalProgressBar}>
                      <View style={[styles.goalProgressFill, { width: `${Math.min(progress, 100)}%` }]} />
                    </View>
                    <Row sx={{ justifyContent: 'space-between' }}>
                      <T variant="caption" style={styles.goalProgress}>
                        {goal.current_value} / {goal.target_value} {goal.unit}
                      </T>
                      {progress >= 100 ? (
                        <TouchableOpacity
                          onPress={() => handleCompleteGoal(goal.id)}
                          accessibilityRole="button"
                          accessibilityLabel="Mark goal as complete"
                        >
                          <T variant="caption" style={styles.completeGoalText}>âœ“ Complete</T>
                        </TouchableOpacity>
                      ) : null}
                    </Row>
                  </View>
                );
              })}
            </Card>
          ) : null}
        </Col>
      </ScrollView>
    </BaseScreen>
  );
};

const styles = StyleSheet.create({
  scrollView: {
    flex: 1,
  },
  welcomeSection: {
    marginBottom: 8,
  },
  summaryText: {
    color: '#6B7280',
  },
  streakText: {
    color: '#EF4444',
    fontWeight: '600',
  },
  viewAllButton: {
    minHeight: 48,
    justifyContent: 'center',
    paddingHorizontal: 8,
  },
  viewAllText: {
    color: '#3B82F6',
  },
  assignmentItem: {
    paddingVertical: 12,
    minHeight: 48,
    borderBottomWidth: 1,
    borderBottomColor: '#E5E7EB',
  },
  dueDate: {
    color: '#9CA3AF',
    marginTop: 4,
  },
  recommendationCard: {
    backgroundColor: '#EFF6FF',
    borderRadius: 12,
    padding: 16,
    borderWidth: 1,
    borderColor: '#BFDBFE',
  },
  activityItem: {
    flexDirection: 'row',
    gap: 4,
    paddingVertical: 8,
    minHeight: 48,
    alignItems: 'center',
  },
  activityTime: {
    color: '#9CA3AF',
  },
  quickAccessButton: {
    alignItems: 'center',
    justifyContent: 'center',
    minHeight: 48,
    minWidth: 60,
    padding: 8,
  },
  progressCard: {
    padding: 16,
    backgroundColor: '#F9FAFB',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  progressBar: {
    height: 8,
    backgroundColor: '#E5E7EB',
    borderRadius: 4,
    overflow: 'hidden',
  },
  progressFill: {
    height: '100%',
    backgroundColor: '#10B981',
  },
  progressText: {
    color: '#6B7280',
    marginTop: 4,
  },
  // NEW FEATURE 1: Performance Chart Styles
  performanceCard: {
    padding: 16,
    backgroundColor: '#F9FAFB',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  chartContainer: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    alignItems: 'flex-end',
    height: 120,
    paddingTop: 10,
  },
  chartBar: {
    alignItems: 'center',
    flex: 1,
    gap: 4,
  },
  barContainer: {
    height: 80,
    width: '80%',
    justifyContent: 'flex-end',
    alignItems: 'center',
  },
  bar: {
    width: '100%',
    backgroundColor: '#3B82F6',
    borderTopLeftRadius: 4,
    borderTopRightRadius: 4,
    minHeight: 4,
  },
  chartLabel: {
    color: '#6B7280',
    fontSize: 10,
  },
  chartValue: {
    color: '#3B82F6',
    fontWeight: '600',
    fontSize: 10,
  },
  // NEW FEATURE 2: Events Calendar Styles
  eventCard: {
    padding: 12,
    marginBottom: 8,
    backgroundColor: '#FFFFFF',
    borderRadius: 8,
    borderWidth: 1,
    borderColor: '#E5E7EB',
  },
  eventSubject: {
    color: '#6B7280',
    marginTop: 2,
  },
  eventDescription: {
    color: '#9CA3AF',
    marginTop: 4,
  },
  // NEW FEATURE 3: Notifications Panel Styles
  notificationsCard: {
    padding: 16,
    backgroundColor: '#FFF7ED',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#FDBA74',
  },
  notificationItem: {
    flexDirection: 'row',
    gap: 12,
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: '#FED7AA',
    minHeight: 48,
    alignItems: 'flex-start',
  },
  notificationDot: {
    width: 8,
    height: 8,
    borderRadius: 4,
    backgroundColor: '#EF4444',
    marginTop: 6,
  },
  notificationMessage: {
    color: '#6B7280',
    marginTop: 2,
  },
  notificationTime: {
    color: '#9CA3AF',
    marginTop: 4,
    fontSize: 10,
  },
  // NEW FEATURE 4: Teacher Announcements Styles
  announcementCard: {
    padding: 12,
    marginBottom: 8,
    backgroundColor: '#EFF6FF',
    borderRadius: 8,
    borderWidth: 1,
    borderColor: '#BFDBFE',
  },
  announcementTeacher: {
    color: '#6B7280',
    marginTop: 2,
  },
  announcementContent: {
    color: '#4B5563',
    lineHeight: 18,
  },
  // NEW FEATURE 5: Study Goals Tracker Styles
  goalsCard: {
    padding: 16,
    backgroundColor: '#F0FDF4',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#86EFAC',
  },
  goalItem: {
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: '#BBF7D0',
  },
  goalDeadline: {
    color: '#6B7280',
    marginTop: 2,
  },
  goalProgressBar: {
    height: 6,
    backgroundColor: '#D1FAE5',
    borderRadius: 3,
    overflow: 'hidden',
  },
  goalProgressFill: {
    height: '100%',
    backgroundColor: '#10B981',
    borderRadius: 3,
  },
  goalProgress: {
    color: '#6B7280',
    marginTop: 4,
  },
  completeGoalText: {
    color: '#10B981',
    fontWeight: '600',
  },
});

export default NewStudentDashboard;
