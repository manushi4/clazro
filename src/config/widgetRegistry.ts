import { HeroCardWidget } from "../components/widgets/dashboard/HeroCardWidget";
// Admin widgets
import { AdminHeroWidget } from "../components/widgets/admin/AdminHeroWidget";
import { AdminStatsWidget } from "../components/widgets/admin/AdminStatsWidget";
import { SystemHealthWidget } from "../components/widgets/admin/SystemHealthWidget";
import { AlertsWidget } from "../components/widgets/admin/AlertsWidget";
import { QuickActionsWidget as AdminQuickActionsWidget } from "../components/widgets/admin/QuickActionsWidget";
import { RecentActivityWidget } from "../components/widgets/admin/RecentActivityWidget";
// Admin User Management widgets
import { UserOverviewStatsWidget } from "../components/widgets/admin/users/UserOverviewStatsWidget";
import { UserListWidget } from "../components/widgets/admin/users/UserListWidget";
import { PendingApprovalsWidget } from "../components/widgets/admin/users/PendingApprovalsWidget";
import { RoleDistributionWidget } from "../components/widgets/admin/users/RoleDistributionWidget";
import { BulkActionsWidget } from "../components/widgets/admin/users/BulkActionsWidget";
import { RecentRegistrationsWidget } from "../components/widgets/admin/users/RecentRegistrationsWidget";
// Admin Finance widgets
import { RevenueSummaryWidget } from "../components/widgets/admin/finance/RevenueSummaryWidget";
import { ExpenseSummaryWidget } from "../components/widgets/admin/finance/ExpenseSummaryWidget";
import { NetProfitWidget } from "../components/widgets/admin/finance/NetProfitWidget";
import { TransactionsWidget } from "../components/widgets/admin/finance/TransactionsWidget";
import { PendingPaymentsWidget } from "../components/widgets/admin/finance/PendingPaymentsWidget";
import { MonthlyChartWidget } from "../components/widgets/admin/finance/MonthlyChartWidget";
import { CategoryBreakdownWidget } from "../components/widgets/admin/finance/CategoryBreakdownWidget";
import { CollectionRateWidget } from "../components/widgets/admin/finance/CollectionRateWidget";
// Admin Analytics widgets
import { TrendsWidget } from "../components/widgets/admin/analytics/TrendsWidget";
import { EngagementWidget } from "../components/widgets/admin/analytics/EngagementWidget";
import { GrowthWidget } from "../components/widgets/admin/analytics/GrowthWidget";
import { ComparisonsWidget } from "../components/widgets/admin/analytics/ComparisonsWidget";
// Admin Content widgets
import { ContentStatsWidget } from "../components/widgets/admin/content/ContentStatsWidget";
import { ContentListWidget } from "../components/widgets/admin/content/ContentListWidget";
import { ContentCategoriesWidget } from "../components/widgets/admin/content/ContentCategoriesWidget";
// Admin Organization widgets
import { OrgTreeWidget } from "../components/widgets/admin/org/OrgTreeWidget";
import { ClassListWidget } from "../components/widgets/admin/org/ClassListWidget";
import { QuickCreateWidget } from "../components/widgets/admin/org/QuickCreateWidget";
// Admin Profile widgets
import { AdminProfileActivityWidget } from "../components/widgets/admin/profile/AdminProfileActivityWidget";
// Admin Fees widgets
import { StudentFeesDashboardWidget } from "../components/widgets/admin/fees/StudentFeesDashboardWidget";
import { FeeCollectionTrendWidget } from "../components/widgets/admin/fees/FeeCollectionTrendWidget";
// Admin Payroll widgets
import { TeacherPayrollWidget } from "../components/widgets/admin/payroll/TeacherPayrollWidget";
// Admin Academic widgets
import { BatchPerformanceWidget } from "../components/widgets/admin/academic/BatchPerformanceWidget";
import { AttendanceOverviewWidget } from "../components/widgets/admin/academic/AttendanceOverviewWidget";
import { AdmissionStatsWidget } from "../components/widgets/admin/academic/AdmissionStatsWidget";
// Teacher widgets
import { TeacherHeroWidget } from "../components/widgets/teacher/TeacherHeroWidget";
import { TeacherStatsWidget } from "../components/widgets/teacher/TeacherStatsWidget";
import { UpcomingClassesWidget } from "../components/widgets/teacher/UpcomingClassesWidget";
import { PendingGradingWidget } from "../components/widgets/teacher/PendingGradingWidget";
import { AtRiskStudentsWidget } from "../components/widgets/teacher/AtRiskStudentsWidget";
import { TeacherQuickActionsWidget } from "../components/widgets/teacher/TeacherQuickActionsWidget";
import { ClassCardsWidget } from "../components/widgets/teacher/ClassCardsWidget";
import { ClassRosterWidget } from "../components/widgets/teacher/ClassRosterWidget";
import { ClassStatsWidget } from "../components/widgets/teacher/ClassStatsWidget";
import { ClassActivityWidget } from "../components/widgets/teacher/ClassActivityWidget";
import { ClassRecentActivityWidget } from "../components/widgets/teacher/ClassRecentActivityWidget";
import { ClassOverviewWidget } from "../components/widgets/teacher/ClassOverviewWidget";
import { AttendanceHeroWidget } from "../components/widgets/teacher/AttendanceHeroWidget";
import { AttendanceQuickActionsWidget } from "../components/widgets/teacher/AttendanceQuickActionsWidget";
import { AttendanceRecentWidget } from "../components/widgets/teacher/AttendanceRecentWidget";
import { AttendanceTrendsWidget } from "../components/widgets/teacher/AttendanceTrendsWidget";
import { AttendanceClassCompareWidget } from "../components/widgets/teacher/AttendanceClassCompareWidget";
import { AttendanceLowAlertsWidget } from "../components/widgets/teacher/AttendanceLowAlertsWidget";
import { AttendanceTodaySummaryWidget } from "../components/widgets/teacher/AttendanceTodaySummaryWidget";
import { AttendanceQuickMarkWidget } from "../components/widgets/teacher/AttendanceQuickMarkWidget";
import { AttendanceTrendsCompactWidget } from "../components/widgets/teacher/AttendanceTrendsCompactWidget";
import { AttendanceAlertsWidget } from "../components/widgets/teacher/AttendanceAlertsWidget";
import { RecentGradesWidget } from "../components/widgets/teacher/RecentGradesWidget";
import { GradingStatsWidget } from "../components/widgets/teacher/GradingStatsWidget";
import { RubricTemplatesWidget } from "../components/widgets/teacher/RubricTemplatesWidget";
import { GradingQuickActionsWidget } from "../components/widgets/teacher/GradingQuickActionsWidget";
import { StudentStatsWidget } from "../components/widgets/teacher/StudentStatsWidget";
import { ClassStudentsWidget } from "../components/widgets/teacher/ClassStudentsWidget";
import { TopPerformersWidget } from "../components/widgets/teacher/TopPerformersWidget";
import { StudentQuickActionsWidget } from "../components/widgets/teacher/StudentQuickActionsWidget";
import { MessagesInboxWidget } from "../components/widgets/teacher/MessagesInboxWidget";
import { AnnouncementsWidget as TeacherAnnouncementsWidget } from "../components/widgets/teacher/AnnouncementsWidget";
import { ParentContactsWidget } from "../components/widgets/teacher/ParentContactsWidget";
import { DoubtsInboxWidget as TeacherDoubtsInboxWidget } from "../components/widgets/teacher/DoubtsInboxWidget";
import { DoubtDetailWidget as TeacherDoubtDetailWidget } from "../components/widgets/teacher/DoubtDetailWidget";
import { TeacherCalendarWidget } from "../components/widgets/teacher/TeacherCalendarWidget";
import { CalendarEventsWidget } from "../components/widgets/teacher/CalendarEventsWidget";
import { SubstituteManagerWidget } from "../components/widgets/teacher/SubstituteManagerWidget";
import { LeaveRequestWidget } from "../components/widgets/teacher/LeaveRequestWidget";
import { AiInsightsWidget } from "../components/widgets/teacher/AiInsightsWidget";
import { GradingHubActionsWidget } from "../components/widgets/teacher/GradingHubActionsWidget";
import { SubmissionsListWidget } from "../components/widgets/teacher/SubmissionsListWidget";
import { GradeSubmissionWidget } from "../components/widgets/teacher/GradeSubmissionWidget";
import { CreateAssignmentWidget } from "../components/widgets/teacher/CreateAssignmentWidget";
import { GradingRecentWidget } from "../components/widgets/grading/GradingRecentWidget";
import { GradingStatsWidget as GradingStatsWidgetNew } from "../components/widgets/grading/GradingStatsWidget";
import { RubricTemplatesWidget as RubricTemplatesWidgetNew } from "../components/widgets/grading/RubricTemplatesWidget";
// Common widgets (reusable across all roles)
import { MediaBannerWidget } from "../components/widgets/common/MediaBannerWidget";
import { PlaceholderWidget } from "../components/widgets/common/PlaceholderWidget";
import { TodayScheduleWidget } from "../components/widgets/dashboard/TodayScheduleWidget";
import { QuickActionsWidget } from "../components/widgets/dashboard/QuickActionsWidget";
import { AssignmentsTestsWidget } from "../components/widgets/dashboard/AssignmentsTestsWidget";
import { DoubtsInboxWidget } from "../components/widgets/dashboard/DoubtsInboxWidget";
import { ProgressSnapshotWidget } from "../components/widgets/dashboard/ProgressSnapshotWidget";
import { RecommendationsWidget } from "../components/widgets/dashboard/RecommendationsWidget";
import { ClassFeedWidget } from "../components/widgets/dashboard/ClassFeedWidget";
import { PeersGroupsWidget } from "../components/widgets/dashboard/PeersGroupsWidget";
import { ProfileCardWidget } from "../components/widgets/profile/ProfileCardWidget";
import { ProfileQuickLinksWidget } from "../components/widgets/profile/ProfileQuickLinksWidget";
import { ProfileStatsWidget } from "../components/widgets/profile/ProfileStatsWidget";
import { ProfileAchievementsWidget } from "../components/widgets/profile/ProfileAchievementsWidget";
import { ProfileActivityWidget } from "../components/widgets/profile/ProfileActivityWidget";
import { ProfilePreferencesWidget } from "../components/widgets/profile/ProfilePreferencesWidget";
import { SubjectProgressWidget } from "../components/widgets/progress/SubjectProgressWidget";
import { StudyStreakWidget } from "../components/widgets/progress/StudyStreakWidget";
import { StreakTrackerWidget } from "../components/widgets/progress/StreakTrackerWidget";
import { LearningGoalsWidget } from "../components/widgets/progress/LearningGoalsWidget";
import { StatsGridWidget } from "../components/widgets/stats/StatsGridWidget";
import { ActiveQuestsWidget } from "../components/widgets/gamification/ActiveQuestsWidget";
import { PeersLeaderboardWidget } from "../components/widgets/social/PeersLeaderboardWidget";
import { ContinueLearningWidget } from "../components/widgets/study/ContinueLearningWidget";
import { WeakAreasWidget } from "../components/widgets/progress/WeakAreasWidget";
import { AnalyticsSnapshotWidget } from "../components/widgets/analytics/AnalyticsSnapshotWidget";
import { KpiGridWidget } from "../components/widgets/analytics/KpiGridWidget";
import { ClassPerformanceWidget } from "../components/widgets/analytics/ClassPerformanceWidget";
import { TopPerformersWidget as ClassTopPerformersWidget } from "../components/widgets/analytics/TopPerformersWidget";
// Schedule widgets
import { LiveClassWidget } from "../components/widgets/schedule/LiveClassWidget";
import { WeekCalendarWidget } from "../components/widgets/schedule/WeekCalendarWidget";
import { UpcomingEventsWidget } from "../components/widgets/schedule/UpcomingEventsWidget";
// AI widgets
import { AIToolsWidget } from "../components/widgets/ai/AIToolsWidget";
import { LearningInsightsWidget } from "../components/widgets/ai/LearningInsightsWidget";
import { PerformancePredictionsWidget } from "../components/widgets/ai/PerformancePredictionsWidget";
import { WeakTopicAlertsWidget } from "../components/widgets/ai/WeakTopicAlertsWidget";
import { StudyRecommendationsWidget } from "../components/widgets/ai/StudyRecommendationsWidget";
// Automation widgets
import { RemindersWidget } from "../components/widgets/automation/RemindersWidget";
import { StreakProtectionWidget } from "../components/widgets/automation/StreakProtectionWidget";
// Rewards widgets
import { RewardShopPreviewWidget } from "../components/widgets/rewards/RewardShopPreviewWidget";
import { XpBalanceWidget } from "../components/widgets/rewards/XpBalanceWidget";
// Community widgets
import { CommunityFeedWidget } from "../components/widgets/social/CommunityFeedWidget";
import { StudyGroupsWidget } from "../components/widgets/social/StudyGroupsWidget";
import { PeerMatchesWidget } from "../components/widgets/social/PeerMatchesWidget";
// Study widgets
import { NotesSummaryWidget } from "../components/widgets/study/NotesSummaryWidget";
import { RecentViewedWidget } from "../components/widgets/study/RecentViewedWidget";
import { DownloadsSummaryWidget } from "../components/widgets/study/DownloadsSummaryWidget";
// Social widgets
import { ConnectionsListWidget } from "../components/widgets/social/ConnectionsListWidget";
import { SuggestedPeersWidget } from "../components/widgets/social/SuggestedPeersWidget";
// Notifications widgets
import { NotificationsPreviewWidget as StudentNotificationsPreviewWidget } from "../components/widgets/notifications/NotificationsPreviewWidget";
// Assessment widgets
import { TasksOverviewWidget } from "../components/widgets/assessment/TasksOverviewWidget";
// Parent widgets
import { ChildrenOverviewWidget } from "../components/widgets/parent/ChildrenOverviewWidget";
import { AttendanceSummaryWidget } from "../components/widgets/parent/AttendanceSummaryWidget";
import { FeeAlertsWidget } from "../components/widgets/parent/FeeAlertsWidget";
import { NotificationsPreviewWidget } from "../components/widgets/parent/NotificationsPreviewWidget";
import { AIInsightsPreviewWidget } from "../components/widgets/parent/AIInsightsPreviewWidget";
import { ParentQuickActionsWidget } from "../components/widgets/parent/ParentQuickActionsWidget";
import { ChildProgressWidget } from "../components/widgets/parent/ChildProgressWidget";
import { ChildStatsWidget } from "../components/widgets/parent/ChildStatsWidget";
import { ChildWeakAreasWidget } from "../components/widgets/parent/ChildWeakAreasWidget";
import { ChildPerformanceChartWidget } from "../components/widgets/parent/ChildPerformanceChartWidget";
import { ChildAssignmentsWidget } from "../components/widgets/parent/ChildAssignmentsWidget";
import { ChildSubjectProgressWidget } from "../components/widgets/parent/ChildSubjectProgressWidget";
import { ChildReportCardWidget } from "../components/widgets/parent/ChildReportCardWidget";
import { SubjectGradesWidget } from "../components/widgets/parent/SubjectGradesWidget";
import { ReportCardSummaryWidget } from "../components/widgets/parent/ReportCardSummaryWidget";
import { TeacherRemarksWidget } from "../components/widgets/parent/TeacherRemarksWidget";
import { ParentMessagesWidget } from "../components/widgets/parent/ParentMessagesWidget";
import { ParentAnnouncementsWidget } from "../components/widgets/parent/ParentAnnouncementsWidget";
import { ParentTeacherContactsWidget } from "../components/widgets/parent/ParentTeacherContactsWidget";
import { ParentFeeSummaryWidget } from "../components/widgets/parent/ParentFeeSummaryWidget";
import { ParentPendingFeesWidget } from "../components/widgets/parent/ParentPendingFeesWidget";
import { ParentPaymentHistoryWidget } from "../components/widgets/parent/ParentPaymentHistoryWidget";
import { ParentAIPredictionsWidget } from "../components/widgets/parent/ParentAIPredictionsWidget";
import { ParentAIRecommendationsWidget } from "../components/widgets/parent/ParentAIRecommendationsWidget";
import { ParentAIAlertsWidget } from "../components/widgets/parent/ParentAIAlertsWidget";
import { ParentComparisonAnalyticsWidget } from "../components/widgets/parent/ParentComparisonAnalyticsWidget";
// AI widgets
import { AITutorChatWidget } from "../components/widgets/ai/AITutorChatWidget";
// Automation widgets
import { N8nTestWidget } from "../components/widgets/automation/N8nTestWidget";
// Settings widgets
import { SettingsAccountWidget, SettingsNotificationsWidget, SettingsAppearanceWidget, SettingsAboutWidget, SettingsLogoutWidget } from "../components/widgets/settings";
import type { WidgetComponent, WidgetId, WidgetMetadata } from "../types/widget.types";

type WidgetRegistryEntry = {
  component: WidgetComponent;
  metadata: WidgetMetadata;
};

const registry: Record<WidgetId, WidgetRegistryEntry> = {
  // New short IDs (used in database)
  "hero.greeting": {
    component: HeroCardWidget,
    metadata: buildMetadata("hero.greeting", "dashboard:widgets.heroCard.title", "dashboard:widgets.heroCard.subtitle", "home.dashboard"),
  },
  "schedule.today": {
    component: TodayScheduleWidget,
    metadata: buildMetadata("schedule.today", "dashboard:widgets.todaySchedule.title", "dashboard:widgets.todaySchedule.subtitle", "home.dashboard"),
  },
  "live.class": {
    component: LiveClassWidget,
    metadata: {
      id: "live.class",
      titleKey: "dashboard:widgets.liveClass.title",
      descriptionKey: "dashboard:widgets.liveClass.subtitle",
      featureId: "schedule.live",
      roles: ["student"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showParticipants: true,
        showJoinButton: true,
        showTeacher: true,
        showSubject: true,
        showCountdown: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "actions.quick": {
    component: QuickActionsWidget,
    metadata: buildMetadata("actions.quick", "dashboard:widgets.quickActions.title", "dashboard:widgets.quickActions.subtitle", "home.dashboard"),
  },
  "assignments.pending": {
    component: AssignmentsTestsWidget,
    metadata: buildMetadata("assignments.pending", "dashboard:widgets.assignmentsTests.title", "dashboard:widgets.assignmentsTests.subtitle", "study.assignments"),
  },
  "doubts.inbox": {
    component: DoubtsInboxWidget,
    metadata: buildMetadata("doubts.inbox", "dashboard:widgets.doubtsInbox.title", "dashboard:widgets.doubtsInbox.subtitle", "ask.doubts"),
  },
  "progress.snapshot": {
    component: ProgressSnapshotWidget,
    metadata: buildMetadata("progress.snapshot", "dashboard:widgets.progressSnapshot.title", "dashboard:widgets.progressSnapshot.subtitle", "progress.analytics"),
  },
  "progress.subject-wise": {
    component: SubjectProgressWidget,
    metadata: {
      id: "progress.subject-wise",
      titleKey: "dashboard:widgets.subjectProgress.title",
      descriptionKey: "dashboard:widgets.subjectProgress.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxSubjects: 5,
        showChapters: true,
        showStats: true,
        showProgressBar: true,
        showPercentage: true,
        showLastActivity: false,
        sortBy: "progress",
        enableTap: true,
        showViewAll: true,
      },
      requiredPermissions: [],
    },
  },
  "progress.streak": {
    component: StudyStreakWidget,
    metadata: {
      id: "progress.streak",
      titleKey: "dashboard:widgets.studyStreak.title",
      descriptionKey: "dashboard:widgets.studyStreak.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showCurrentStreak: true,
        showLongestStreak: true,
        showWeeklyGoal: true,
        showAchievements: true,
        showRecentActivity: false,
        maxAchievements: 2,
        enableTap: true,
        showMotivation: true,
      },
      requiredPermissions: [],
    },
  },
  "streak.tracker": {
    component: StreakTrackerWidget,
    metadata: {
      id: "streak.tracker",
      titleKey: "dashboard:widgets.studyStreak.title",
      descriptionKey: "dashboard:widgets.studyStreak.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showCurrentStreak: true,
        showLongestStreak: true,
        showWeeklyGoal: true,
        showAchievements: true,
        showRecentActivity: false,
        maxAchievements: 2,
        enableTap: true,
        showMotivation: true,
      },
      requiredPermissions: [],
    },
  },
  "progress.goals": {
    component: LearningGoalsWidget,
    metadata: {
      id: "progress.goals",
      titleKey: "dashboard:widgets.learningGoals.title",
      descriptionKey: "dashboard:widgets.learningGoals.subtitle",
      featureId: "progress.analytics",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxGoals: 4,
        showProgress: true,
        showDeadline: true,
        showPriority: true,
        showAddButton: true,
        compactMode: false,
        enableTap: true,
      },
    },
  },
  "progress.weak-areas": {
    component: WeakAreasWidget,
    metadata: {
      id: "progress.weak-areas",
      titleKey: "dashboard:widgets.weakAreas.title",
      descriptionKey: "dashboard:widgets.weakAreas.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxTopics: 4,
        showScore: true,
        showPracticeButton: true,
        showDifficulty: true,
        showSubject: true,
        showChapter: false,
        sortBy: "score",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  // Alias for progress.weak-areas with spec-compliant ID
  "weak.topics": {
    component: WeakAreasWidget,
    metadata: {
      id: "weak.topics",
      titleKey: "dashboard:widgets.weakAreas.title",
      descriptionKey: "dashboard:widgets.weakAreas.subtitle",
      featureId: "progress.analytics",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxTopics: 4,
        showScore: true,
        showPracticeButton: true,
        showDifficulty: true,
        showSubject: true,
        showChapter: false,
        sortBy: "score",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "stats.grid": {
    component: StatsGridWidget,
    metadata: {
      id: "stats.grid",
      titleKey: "dashboard:widgets.statsGrid.title",
      descriptionKey: "dashboard:widgets.statsGrid.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        columns: 2,
        showXP: true,
        showStreak: true,
        showBadges: true,
        showStudyTime: true,
        showTests: true,
        showAssignments: true,
        showTrends: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "analytics.snapshot": {
    component: AnalyticsSnapshotWidget,
    metadata: {
      id: "analytics.snapshot",
      titleKey: "dashboard:widgets.analyticsSnapshot.title",
      descriptionKey: "dashboard:widgets.analyticsSnapshot.subtitle",
      featureId: "progress.analytics",
      roles: ["student", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showThisWeek: true,
        showSubjects: true,
        showStreak: true,
        showTrends: true,
        showRecommendations: true,
        maxSubjects: 3,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },

  "analytics.kpi-grid": {
    component: KpiGridWidget,
    metadata: {
      id: "analytics.kpi-grid",
      titleKey: "dashboard:widgets.kpiGrid.title",
      descriptionKey: "dashboard:widgets.kpiGrid.subtitle",
      featureId: "analytics",
      roles: ["admin", "teacher", "parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000, // 2 minutes
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        columns: 2,
        showTrend: true,
        showGrowth: true,
        showIcon: true,
        limit: 6,
      },
      requiredPermissions: [],
    },
  },

  "analytics.class-performance": {
    component: ClassPerformanceWidget,
    metadata: {
      id: "analytics.class-performance",
      titleKey: "dashboard:widgets.classPerformance.title",
      descriptionKey: "dashboard:widgets.classPerformance.subtitle",
      featureId: "analytics",
      category: "analytics",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000, // 5 minutes
        prefetchOnDashboardLoad: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 6,
        showRank: true,
        showTrend: true,
        showClassAverage: true,
        layoutStyle: "list",
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "analytics.top-performers": {
    component: ClassTopPerformersWidget,
    metadata: {
      id: "analytics.top-performers",
      titleKey: "dashboard:widgets.topPerformers.title",
      descriptionKey: "dashboard:widgets.topPerformers.subtitle",
      featureId: "analytics",
      category: "analytics",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showTrend: true,
        showSubject: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "quests.active": {
    component: ActiveQuestsWidget,
    metadata: {
      id: "quests.active",
      titleKey: "dashboard:widgets.activeQuests.title",
      descriptionKey: "dashboard:widgets.activeQuests.subtitle",
      featureId: "gamification",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxQuests: 3,
        showDaily: true,
        showWeekly: true,
        showProgress: true,
        showXPReward: true,
        showSummary: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "ai.recommendations": {
    component: RecommendationsWidget,
    metadata: buildMetadata("ai.recommendations", "dashboard:widgets.recommendations.title", "dashboard:widgets.recommendations.subtitle", "ai.tutor", ["ai.tutor.use"]),
  },
  "ai.tools": {
    component: AIToolsWidget,
    metadata: {
      id: "ai.tools",
      titleKey: "dashboard:widgets.aiTools.title",
      descriptionKey: "dashboard:widgets.aiTools.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxTools: 6,
        layoutStyle: "grid",
        showDescription: true,
        showIcon: true,
        columns: 2,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "ai.tutor-chat": {
    component: AITutorChatWidget,
    metadata: {
      id: "ai.tutor-chat",
      titleKey: "dashboard:widgets.aiTutor.title",
      descriptionKey: "dashboard:widgets.aiTutor.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      minHeight: "lg",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
      },
      defaultConfig: {
        showSettings: true,
        maxMessages: 50,
        enableVoice: false,
      },
      requiredPermissions: ["ai.tutor.use"],
    },
  },
  "ai.learning-insights": {
    component: LearningInsightsWidget,
    metadata: {
      id: "ai.learning-insights",
      titleKey: "dashboard:widgets.learningInsights.title",
      descriptionKey: "dashboard:widgets.learningInsights.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showDescription: true,
        showMetric: true,
        showAction: true,
        showSubject: true,
        layoutStyle: "list",
        filterType: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "ai.performance-predictions": {
    component: PerformancePredictionsWidget,
    metadata: {
      id: "ai.performance-predictions",
      titleKey: "dashboard:widgets.performancePredictions.title",
      descriptionKey: "dashboard:widgets.performancePredictions.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showDescription: true,
        showConfidence: true,
        showAction: true,
        showSubject: true,
        showProgress: true,
        layoutStyle: "list",
        filterType: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "ai.weak-topic-alerts": {
    component: WeakTopicAlertsWidget,
    metadata: {
      id: "ai.weak-topic-alerts",
      titleKey: "dashboard:widgets.weakTopicAlerts.title",
      descriptionKey: "dashboard:widgets.weakTopicAlerts.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showDescription: true,
        showScore: true,
        showAction: true,
        showSubject: true,
        showSeverity: true,
        showDaysSince: true,
        layoutStyle: "list",
        filterType: "all",
        filterSeverity: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "ai.study-recommendations": {
    component: StudyRecommendationsWidget,
    metadata: {
      id: "ai.study-recommendations",
      titleKey: "dashboard:widgets.studyRecommendations.title",
      descriptionKey: "dashboard:widgets.studyRecommendations.subtitle",
      featureId: "ai.tutor",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showDescription: true,
        showConfidence: true,
        showAction: true,
        showSubject: true,
        showTime: true,
        showDifficulty: true,
        showReason: true,
        layoutStyle: "list",
        filterType: "all",
        filterDifficulty: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "notes.summary": {
    component: NotesSummaryWidget,
    metadata: {
      id: "notes.summary",
      titleKey: "dashboard:widgets.notesSummary.title",
      descriptionKey: "dashboard:widgets.notesSummary.subtitle",
      featureId: "study.notes",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxNotes: 5,
        layoutStyle: "list",
        showPinned: true,
        showWordCount: true,
        showTags: true,
        showStats: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "recent.viewed": {
    component: RecentViewedWidget,
    metadata: {
      id: "recent.viewed",
      titleKey: "dashboard:widgets.recentViewed.title",
      descriptionKey: "dashboard:widgets.recentViewed.subtitle",
      featureId: "study.history",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        layoutStyle: "list",
        showProgress: true,
        showIcon: true,
        showType: true,
        showTimeAgo: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "week.calendar": {
    component: WeekCalendarWidget,
    metadata: {
      id: "week.calendar",
      titleKey: "dashboard:widgets.weekCalendar.title",
      descriptionKey: "dashboard:widgets.weekCalendar.subtitle",
      featureId: "schedule.calendar",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showWeekNavigation: true,
        showEventCount: true,
        showEventTime: true,
        showSubjectColor: true,
        showLiveIndicator: true,
        maxEventsPerDay: 3,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "upcoming.events": {
    component: UpcomingEventsWidget,
    metadata: {
      id: "upcoming.events",
      titleKey: "dashboard:widgets.upcomingEvents.title",
      descriptionKey: "dashboard:widgets.upcomingEvents.subtitle",
      featureId: "schedule.events",
      roles: ["student", "parent", "teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 10 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showDescription: true,
        showLocation: true,
        showTime: true,
        showImportantBadge: true,
        showEventType: true,
        layoutStyle: "list",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "notifications.preview": {
    component: StudentNotificationsPreviewWidget,
    metadata: {
      id: "notifications.preview",
      titleKey: "dashboard:widgets.notificationsPreview.title",
      descriptionKey: "dashboard:widgets.notificationsPreview.subtitle",
      featureId: "notifications",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showBody: true,
        showTime: true,
        showPriorityBadge: true,
        showCategory: false,
        showUnreadIndicator: true,
        layoutStyle: "list",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "tasks.overview": {
    component: TasksOverviewWidget,
    metadata: {
      id: "tasks.overview",
      titleKey: "dashboard:widgets.tasksOverview.title",
      descriptionKey: "dashboard:widgets.tasksOverview.subtitle",
      featureId: "assessment",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showCounts: true,
        showOverdue: true,
        showDueDate: true,
        showType: true,
        showScore: false,
        layoutStyle: "list",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "downloads.summary": {
    component: DownloadsSummaryWidget,
    metadata: {
      id: "downloads.summary",
      titleKey: "dashboard:widgets.downloadsSummary.title",
      descriptionKey: "dashboard:widgets.downloadsSummary.subtitle",
      featureId: "study.downloads",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showStorage: true,
        showRecent: true,
        showTypeBreakdown: false,
        showFileSize: true,
        layoutStyle: "list",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "connections.list": {
    component: ConnectionsListWidget,
    metadata: {
      id: "connections.list",
      titleKey: "dashboard:widgets.connectionsList.title",
      descriptionKey: "dashboard:widgets.connectionsList.subtitle",
      featureId: "peers.network",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showOnlineStatus: true,
        showXP: true,
        showStreak: true,
        showMutualSubjects: true,
        showStats: true,
        layoutStyle: "list",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "suggestions.peers": {
    component: SuggestedPeersWidget,
    metadata: {
      id: "suggestions.peers",
      titleKey: "dashboard:widgets.suggestedPeers.title",
      descriptionKey: "dashboard:widgets.suggestedPeers.subtitle",
      featureId: "peers.network",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showMatchScore: true,
        showMutualSubjects: true,
        showMutualConnections: true,
        showOnlineStatus: true,
        showMatchReasons: true,
        layoutStyle: "list",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  // ============ AUTOMATION WIDGETS ============
  "automation.n8n-test": {
    component: N8nTestWidget,
    metadata: {
      id: "automation.n8n-test",
      titleKey: "dashboard:widgets.n8nTest.title",
      descriptionKey: "dashboard:widgets.n8nTest.subtitle",
      featureId: "automation",
      roles: ["student", "teacher", "parent", "admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "standard",
      minHeight: "md",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
      },
      defaultConfig: {
        webhookUrl: "",
        showResponse: true,
        enableCustomMessage: true,
      },
      requiredPermissions: [],
    },
  },
  "automation.reminders": {
    component: RemindersWidget,
    metadata: {
      id: "automation.reminders",
      titleKey: "dashboard:widgets.reminders.title",
      descriptionKey: "dashboard:widgets.reminders.subtitle",
      featureId: "automation",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showDescription: true,
        showTime: true,
        showAction: true,
        showRepeat: true,
        showPriority: true,
        showOverdue: true,
        layoutStyle: "list",
        filterType: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "automation.streak-protection": {
    component: StreakProtectionWidget,
    metadata: {
      id: "automation.streak-protection",
      titleKey: "dashboard:widgets.streakProtection.title",
      descriptionKey: "dashboard:widgets.streakProtection.subtitle",
      featureId: "automation",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showShields: true,
        showWeekProgress: true,
        showMilestone: true,
        showQuickAction: true,
        showUrgencyBanner: true,
        layoutStyle: "card",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "rewards.shop-preview": {
    component: RewardShopPreviewWidget,
    metadata: {
      id: "rewards.shop-preview",
      titleKey: "dashboard:widgets.rewardShop.title",
      descriptionKey: "dashboard:widgets.rewardShop.subtitle",
      featureId: "rewards",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showFeaturedOnly: false,
        showPrice: true,
        showDiscount: true,
        showRarity: true,
        showStock: true,
        showBadges: true,
        layoutStyle: "cards",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "rewards.xp-balance": {
    component: XpBalanceWidget,
    metadata: {
      id: "rewards.xp-balance",
      titleKey: "dashboard:widgets.xpBalance.title",
      descriptionKey: "dashboard:widgets.xpBalance.subtitle",
      featureId: "rewards",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showCoins: true,
        showXp: true,
        showLevel: true,
        showProgress: true,
        showRank: true,
        showMultiplier: true,
        showEarnings: true,
        layoutStyle: "card",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "community.feed": {
    component: CommunityFeedWidget,
    metadata: {
      id: "community.feed",
      titleKey: "dashboard:widgets.communityFeed.title",
      descriptionKey: "dashboard:widgets.communityFeed.subtitle",
      featureId: "social",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showAuthorInfo: true,
        showEngagement: true,
        showPostType: true,
        showPinnedFirst: true,
        layoutStyle: "list",
        filterType: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "study.groups": {
    component: StudyGroupsWidget,
    metadata: {
      id: "study.groups",
      titleKey: "dashboard:widgets.studyGroups.title",
      descriptionKey: "dashboard:widgets.studyGroups.subtitle",
      featureId: "social",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 3 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showMemberCount: true,
        showSubject: true,
        showNextMeeting: true,
        showGroupType: true,
        layoutStyle: "list",
        filterType: "all",
        showMyGroupsOnly: false,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "peer.matches": {
    component: PeerMatchesWidget,
    metadata: {
      id: "peer.matches",
      titleKey: "dashboard:widgets.peerMatches.title",
      descriptionKey: "dashboard:widgets.peerMatches.subtitle",
      featureId: "social",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showMatchScore: true,
        showCommonSubjects: true,
        showPeerStats: true,
        showOnlineStatus: true,
        layoutStyle: "list",
        filterType: "all",
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "peers.leaderboard": {
    component: PeersLeaderboardWidget,
    metadata: {
      id: "peers.leaderboard",
      titleKey: "dashboard:widgets.peersLeaderboard.title",
      descriptionKey: "dashboard:widgets.peersLeaderboard.subtitle",
      featureId: "peers.network",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        scope: "school",
        maxEntries: 5,
        showMyRank: true,
        showPercentile: true,
        showScope: true,
        showXP: true,
        showStreak: true,
        compactMode: false,
        enableTap: true,
      },
    },
  },
  "continue.learning": {
    component: ContinueLearningWidget,
    metadata: {
      id: "continue.learning",
      titleKey: "dashboard:widgets.continueLearning.title",
      descriptionKey: "dashboard:widgets.continueLearning.subtitle",
      featureId: "home.dashboard",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 4,
        showProgress: true,
        showTimeAgo: true,
        showType: true,
        layoutStyle: "horizontal",
        enableTap: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },
  "feed.class": {
    component: ClassFeedWidget,
    metadata: buildMetadata("feed.class", "dashboard:widgets.classFeed.title", "dashboard:widgets.classFeed.subtitle", "home.dashboard"),
  },
  "peers.groups": {
    component: PeersGroupsWidget,
    metadata: buildMetadata("peers.groups", "dashboard:widgets.peersGroups.title", "dashboard:widgets.peersGroups.subtitle", "peers.network"),
  },
  // Profile widgets
  "profile.card": {
    component: ProfileCardWidget,
    metadata: {
      id: "profile.card",
      titleKey: "profile:widgets.profileCard.title",
      descriptionKey: "profile:widgets.profileCard.subtitle",
      featureId: "profile",
      roles: ["student", "teacher", "parent", "admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showAvatar: true,
        showClass: true,
        showSchool: true,
        showStats: true,
        showEditButton: true,
        avatarSize: "medium",
        layoutStyle: "horizontal",
      },
      requiredPermissions: [],
    },
  },

  "profile.preferences": {
    component: ProfilePreferencesWidget,
    metadata: {
      id: "profile.preferences",
      titleKey: "profile:widgets.preferences.title",
      descriptionKey: "profile:widgets.preferences.subtitle",
      featureId: "profile",
      roles: ["student", "teacher", "parent", "admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showNotifications: true,
        showAppearance: true,
        showLanguage: true,
        showPrivacy: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },

  "profile.quickLinks": {
    component: ProfileQuickLinksWidget,
    metadata: {
      id: "profile.quickLinks",
      titleKey: "profile:widgets.quickLinks.title",
      descriptionKey: "profile:widgets.quickLinks.subtitle",
      featureId: "profile",
      roles: ["student", "teacher", "parent", "admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
      },
      defaultConfig: {
        showEditProfile: true,
        showSettings: true,
        showNotifications: true,
        showHelp: true,
        showAbout: true,
        showLogout: true,
        layoutStyle: "list",
        showIcons: true,
        showDividers: true,
      },
      requiredPermissions: [],
    },
  },
  "profile.stats": {
    component: ProfileStatsWidget,
    metadata: {
      id: "profile.stats",
      titleKey: "profile:widgets.profileStats.title",
      descriptionKey: "profile:widgets.profileStats.subtitle",
      featureId: "profile",
      roles: ["student", "teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "grid",
        showXP: true,
        showStreak: true,
        showBadges: true,
        showStudyTime: true,
        showAssessments: true,
        showProgress: true,
        showTrends: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },
  "profile.achievements": {
    component: ProfileAchievementsWidget,
    metadata: {
      id: "profile.achievements",
      titleKey: "profile:widgets.achievements.title",
      descriptionKey: "profile:widgets.achievements.subtitle",
      featureId: "gamification",
      roles: ["student"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "grid",
        maxItems: 6,
        showProgress: true,
        showPoints: true,
        showRarity: true,
        showLocked: true,
        showSummary: true,
        filterCategory: "all",
      },
      requiredPermissions: [],
    },
  },
  "profile.activity": {
    component: ProfileActivityWidget,
    metadata: {
      id: "profile.activity",
      titleKey: "profile:widgets.activity.title",
      descriptionKey: "profile:widgets.activity.subtitle",
      featureId: "profile",
      roles: ["student", "teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "timeline",
        maxItems: 10,
        showTodayStats: true,
        showPoints: true,
        showTime: true,
        showGroupHeaders: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },
  // ============ PARENT WIDGETS ============
  "parent.children-overview": {
    component: ChildrenOverviewWidget,
    metadata: {
      id: "parent.children-overview",
      titleKey: "parent:widgets.childrenOverview.title",
      descriptionKey: "parent:widgets.childrenOverview.subtitle",
      featureId: "parent.children",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "cards",
        showAvatar: true,
        showClass: true,
        showAttendanceToday: true,
        showQuickStats: true,
        statsToShow: ["attendance", "assignments", "streak"],
        enableTap: true,
        showViewAll: false,
      },
      requiredPermissions: [], // No permissions required for now
    },
  },
  "parent.attendance-summary": {
    component: AttendanceSummaryWidget,
    metadata: {
      id: "parent.attendance-summary",
      titleKey: "parent:widgets.attendanceSummary.title",
      descriptionKey: "parent:widgets.attendanceSummary.subtitle",
      featureId: "parent.attendance",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "cards",
        showTodayStatus: true,
        showWeekSummary: true,
        showMonthStats: true,
        showPercentage: true,
        showCheckInTime: false,
        showRecentDays: false,
        maxRecentDays: 5,
        enableTap: true,
        showViewAll: false,
      },
      requiredPermissions: [],
    },
  },
  "parent.fee-alerts": {
    component: FeeAlertsWidget,
    metadata: {
      id: "parent.fee-alerts",
      titleKey: "parent:widgets.feeAlerts.title",
      descriptionKey: "parent:widgets.feeAlerts.subtitle",
      featureId: "parent.fees",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        showOverdueFirst: true,
        showAmount: true,
        showDueDate: true,
        showFeeType: true,
        showPayButton: true,
        maxItems: 5,
        enableTap: true,
        showTotalSummary: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.notifications-preview": {
    component: NotificationsPreviewWidget,
    metadata: {
      id: "parent.notifications-preview",
      titleKey: "parent:widgets.notificationsPreview.title",
      descriptionKey: "parent:widgets.notificationsPreview.subtitle",
      featureId: "parent.notifications",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showUnreadBadge: true,
        showCategory: true,
        showTime: true,
        showPriority: true,
        showPreview: true,
        enableTap: true,
        showUnreadFirst: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.ai-insights-preview": {
    component: AIInsightsPreviewWidget,
    metadata: {
      id: "parent.ai-insights-preview",
      titleKey: "parent:widgets.aiInsights.title",
      descriptionKey: "parent:widgets.aiInsights.subtitle",
      featureId: "parent.ai-insights",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 4,
        showHighPriorityFirst: true,
        showDescription: true,
        showActionButton: true,
        showCategory: true,
        showUnreadBadge: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.quick-actions": {
    component: ParentQuickActionsWidget,
    metadata: {
      id: "parent.quick-actions",
      titleKey: "parent:widgets.quickActions.title",
      descriptionKey: "parent:widgets.quickActions.subtitle",
      featureId: "parent.quick-actions",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 10 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        columns: 2,
        showLabels: true,
        iconSize: "medium",
        style: "filled",
        maxActions: 6,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.child-progress": {
    component: ChildProgressWidget,
    metadata: {
      id: "parent.child-progress",
      titleKey: "parent:widgets.childProgress.title",
      descriptionKey: "parent:widgets.childProgress.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxSubjects: 4,
        showOverallProgress: true,
        showHoursStudied: true,
        showTestStats: true,
        showProgressBar: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.child-stats": {
    component: ChildStatsWidget,
    metadata: {
      id: "parent.child-stats",
      titleKey: "parent:widgets.childStats.title",
      descriptionKey: "parent:widgets.childStats.subtitle",
      featureId: "parent.stats",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "grid",
        columns: 2,
        showXP: true,
        showStreak: true,
        showBadges: true,
        showStudyTime: true,
        showTests: true,
        showAssignments: true,
        showTrends: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.weak-areas": {
    component: ChildWeakAreasWidget,
    metadata: {
      id: "parent.weak-areas",
      titleKey: "parent:widgets.weakAreas.title",
      descriptionKey: "parent:widgets.weakAreas.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxTopics: 4,
        showScore: true,
        showPracticeButton: true,
        showDifficulty: true,
        showSubject: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.performance-chart": {
    component: ChildPerformanceChartWidget,
    metadata: {
      id: "parent.performance-chart",
      titleKey: "parent:widgets.performanceChart.title",
      descriptionKey: "parent:widgets.performanceChart.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "stacked",
        chartType: "bar",
        showSubjectScores: true,
        showWeeklyProgress: true,
        showAverageScore: true,
        showBestScore: true,
        maxSubjects: 5,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.assignments-pending": {
    component: ChildAssignmentsWidget,
    metadata: {
      id: "parent.assignments-pending",
      titleKey: "parent:widgets.assignmentsPending.title",
      descriptionKey: "parent:widgets.assignmentsPending.subtitle",
      featureId: "parent.assignments",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showSubject: true,
        showDueDate: true,
        showPoints: true,
        showType: true,
        showOverdueBadge: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.subject-progress": {
    component: ChildSubjectProgressWidget,
    metadata: {
      id: "parent.subject-progress",
      titleKey: "parent:widgets.subjectProgress.title",
      descriptionKey: "parent:widgets.subjectProgress.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxSubjects: 5,
        showProgressBar: true,
        showScore: true,
        showChapters: true,
        showTests: true,
        showOverallProgress: true,
        showStudyHours: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.report-card-preview": {
    component: ChildReportCardWidget,
    metadata: {
      id: "parent.report-card-preview",
      titleKey: "parent:widgets.reportCardPreview.title",
      descriptionKey: "parent:widgets.reportCardPreview.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxSubjects: 5,
        showOverallGrade: true,
        showAverageScore: true,
        showBestScore: true,
        showPassRate: true,
        showTerm: true,
        showSubjectGrades: true,
        showGradePoints: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.subject-grades": {
    component: SubjectGradesWidget,
    metadata: {
      id: "parent.subject-grades",
      titleKey: "parent:widgets.subjectGrades.title",
      descriptionKey: "parent:widgets.subjectGrades.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {},
      requiredPermissions: [],
    },
  },
  "parent.report-card-summary": {
    component: ReportCardSummaryWidget,
    metadata: {
      id: "parent.report-card-summary",
      titleKey: "parent:widgets.reportCardSummary.title",
      descriptionKey: "parent:widgets.reportCardSummary.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {},
      requiredPermissions: [],
    },
  },
  "parent.teacher-remarks": {
    component: TeacherRemarksWidget,
    metadata: {
      id: "parent.teacher-remarks",
      titleKey: "parent:widgets.teacherRemarks.title",
      descriptionKey: "parent:widgets.teacherRemarks.subtitle",
      featureId: "parent.progress",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {},
      requiredPermissions: [],
    },
  },
  "parent.messages-inbox": {
    component: ParentMessagesWidget,
    metadata: {
      id: "parent.messages-inbox",
      titleKey: "parent:widgets.messagesInbox.title",
      descriptionKey: "parent:widgets.messagesInbox.subtitle",
      featureId: "parent.messages",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showUnreadBadge: true,
        showCategory: true,
        showTime: true,
        showPriority: true,
        showPreview: true,
        showUnreadFirst: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.announcements": {
    component: ParentAnnouncementsWidget,
    metadata: {
      id: "parent.announcements",
      titleKey: "parent:widgets.announcements.title",
      descriptionKey: "parent:widgets.announcements.subtitle",
      featureId: "parent.announcements",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showPinnedFirst: true,
        showPinnedBadge: true,
        showCategory: true,
        showTime: true,
        showPriority: true,
        showPreview: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.teacher-contacts": {
    component: ParentTeacherContactsWidget,
    metadata: {
      id: "parent.teacher-contacts",
      titleKey: "parent:widgets.teacherContacts.title",
      descriptionKey: "parent:widgets.teacherContacts.subtitle",
      featureId: "parent.teacher-contacts",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 10 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showClassTeacherFirst: true,
        showAvailability: true,
        showSubject: true,
        showContactButtons: true,
        showOfficeHours: false,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.fee-summary": {
    component: ParentFeeSummaryWidget,
    metadata: {
      id: "parent.fee-summary",
      titleKey: "parent:widgets.feeSummary.title",
      descriptionKey: "parent:widgets.feeSummary.subtitle",
      featureId: "parent.fees",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showTotalSummary: true,
        showDueDate: true,
        showFeeType: true,
        showAmount: true,
        showPayButton: true,
        showOverdueFirst: true,
        showProgressBar: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.pending-fees": {
    component: ParentPendingFeesWidget,
    metadata: {
      id: "parent.pending-fees",
      titleKey: "parent:widgets.pendingFees.title",
      descriptionKey: "parent:widgets.pendingFees.subtitle",
      featureId: "parent.fees",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 4,
        showDueDate: true,
        showFeeType: true,
        showAmount: true,
        showPayButton: true,
        showOverdueCount: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.payment-history": {
    component: ParentPaymentHistoryWidget,
    metadata: {
      id: "parent.payment-history",
      titleKey: "parent:widgets.paymentHistory.title",
      descriptionKey: "parent:widgets.paymentHistory.subtitle",
      featureId: "parent.fees",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showPaymentMethod: true,
        showReceiptNumber: true,
        showAmount: true,
        showTotalSummary: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.ai-predictions": {
    component: ParentAIPredictionsWidget,
    metadata: {
      id: "parent.ai-predictions",
      titleKey: "parent:widgets.aiPredictions.title",
      descriptionKey: "parent:widgets.aiPredictions.subtitle",
      featureId: "parent.ai-predictions",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 4,
        showConfidence: true,
        showRecommendation: true,
        showPriority: true,
        showUnreadFirst: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.ai-recommendations": {
    component: ParentAIRecommendationsWidget,
    metadata: {
      id: "parent.ai-recommendations",
      titleKey: "parent:widgets.aiRecommendations.title",
      descriptionKey: "parent:widgets.aiRecommendations.subtitle",
      featureId: "parent.ai-recommendations",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 4,
        showDescription: true,
        showActionButton: true,
        showPriority: true,
        showRelevance: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.ai-alerts": {
    component: ParentAIAlertsWidget,
    metadata: {
      id: "parent.ai-alerts",
      titleKey: "parent:widgets.aiAlerts.title",
      descriptionKey: "parent:widgets.aiAlerts.subtitle",
      featureId: "parent.ai-alerts",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 2 * 60 * 1000, // 2 minutes - alerts refresh more frequently
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 4,
        showDescription: true,
        showActionRequired: true,
        showSeverity: true,
        showCriticalFirst: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "parent.comparison-analytics": {
    component: ParentComparisonAnalyticsWidget,
    metadata: {
      id: "parent.comparison-analytics",
      titleKey: "parent:widgets.comparisonAnalytics.title",
      descriptionKey: "parent:widgets.comparisonAnalytics.subtitle",
      featureId: "parent.analytics",
      roles: ["parent"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "list",
        maxItems: 5,
        showInsights: true,
        showTrend: true,
        showPercentile: true,
        showComparisonBar: true,
        comparisonType: "class_average",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  // ============ ADMIN WIDGETS ============
  "admin.hero-card": {
    component: AdminHeroWidget,
    metadata: {
      id: "admin.hero-card",
      titleKey: "admin:widgets.adminHero.title",
      descriptionKey: "admin:widgets.adminHero.subtitle",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showAvatar: true,
        showQuickStats: true,
        showNotificationBadge: true,
        showSettingsButton: true,
        avatarStyle: "circle",
        statsLayout: "horizontal",
      },
      requiredPermissions: [],
    },
  },
  "admin.stats-grid": {
    component: AdminStatsWidget,
    metadata: {
      id: "admin.stats-grid",
      titleKey: "admin:widgets.adminStats.title",
      descriptionKey: "admin:widgets.adminStats.title",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTotalUsers: true,
        showActiveUsers: true,
        showTotalRevenue: true,
        showSystemAlerts: true,
        columns: 2,
        showIcons: true,
        showTrend: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "admin.system-health": {
    component: SystemHealthWidget,
    metadata: {
      id: "admin.system-health",
      titleKey: "admin:widgets.systemHealth.title",
      descriptionKey: "admin:widgets.systemHealth.title",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 30 * 1000, // 30 seconds for health data
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showUptime: true,
        showActiveUsers: true,
        showServerLoad: true,
        showApiStatus: true,
        warningThreshold: 70,
        criticalThreshold: 90,
        autoRefresh: true,
        refreshInterval: 30,
        showDetailsLink: true,
      },
      requiredPermissions: [],
    },
  },
  "admin.alerts": {
    component: AlertsWidget,
    metadata: {
      id: "admin.alerts",
      titleKey: "admin:widgets.alerts.title",
      descriptionKey: "admin:widgets.alerts.subtitle",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 60 * 1000, // 1 minute for alerts
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showSeverity: true,
        showTime: true,
        showSource: true,
        severityFilter: "all",
        showAcknowledged: false,
        enableTap: true,
        showAcknowledge: true,
        showViewAll: true,
        showDismiss: false,
      },
      requiredPermissions: [],
    },
  },
  "admin.quick-actions": {
    component: AdminQuickActionsWidget,
    metadata: {
      id: "admin.quick-actions",
      titleKey: "admin:widgets.quickActions.title",
      descriptionKey: "admin:widgets.quickActions.title",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
      },
      defaultConfig: {
        columns: 2,
        showLabels: true,
        showIcons: true,
        iconSize: "medium",
        style: "filled",
        showAddUser: true,
        showReports: true,
        showSettings: true,
        showAudit: true,
      },
      requiredPermissions: [],
    },
  },
  "admin.recent-activity": {
    component: RecentActivityWidget,
    metadata: {
      id: "admin.recent-activity",
      titleKey: "admin:widgets.recentActivity.title",
      descriptionKey: "admin:widgets.recentActivity.title",
      featureId: "admin.dashboard",
      roles: ["admin", "super_admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000, // 2 minutes
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showAvatar: true,
        showTime: true,
        showIcon: true,
        showViewAll: true,
        typeFilter: "all",
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },

  // ============ ADMIN USER MANAGEMENT WIDGETS ============
  "users.overview-stats": {
    component: UserOverviewStatsWidget,
    metadata: {
      id: "users.overview-stats",
      titleKey: "admin:widgets.userStats.title",
      descriptionKey: "admin:widgets.userStats.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTrends: true,
        columns: 2,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "users.list": {
    component: UserListWidget,
    metadata: {
      id: "users.list",
      titleKey: "admin:widgets.userList.title",
      descriptionKey: "admin:widgets.userList.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 10,
        showSearch: true,
        showFilters: true,
        showStatus: true,
        showRole: true,
        showLastActive: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "users.pending-approvals": {
    component: PendingApprovalsWidget,
    metadata: {
      id: "users.pending-approvals",
      titleKey: "admin:widgets.pendingApprovals.title",
      descriptionKey: "admin:widgets.pendingApprovals.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showOrganization: true,
        showQuickActions: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "users.role-distribution": {
    component: RoleDistributionWidget,
    metadata: {
      id: "users.role-distribution",
      titleKey: "admin:widgets.roleDistribution.title",
      descriptionKey: "admin:widgets.roleDistribution.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showPercentage: true,
        showCount: true,
        showIcon: true,
        enableTap: true,
        chartStyle: "bar",
      },
      requiredPermissions: [],
    },
  },
  "users.bulk-actions": {
    component: BulkActionsWidget,
    metadata: {
      id: "users.bulk-actions",
      titleKey: "admin:widgets.bulkActions.title",
      descriptionKey: "admin:widgets.bulkActions.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
      },
      defaultConfig: {
        columns: 2,
        showLabels: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },
  "users.recent-registrations": {
    component: RecentRegistrationsWidget,
    metadata: {
      id: "users.recent-registrations",
      titleKey: "admin:widgets.recentRegistrations.title",
      descriptionKey: "admin:widgets.recentRegistrations.subtitle",
      featureId: "admin.users",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showRole: true,
        showStatus: true,
        showTime: true,
        showAvatar: true,
        showEmail: false,
        enableTap: true,
        showViewAll: true,
        layoutStyle: "list",
      },
      requiredPermissions: [],
    },
  },

  // ============ ADMIN FINANCE WIDGETS ============
  "finance.revenue-summary": {
    component: RevenueSummaryWidget,
    metadata: {
      id: "finance.revenue-summary",
      titleKey: "admin:widgets.revenueSummary.title",
      descriptionKey: "admin:widgets.revenueSummary.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTotalRevenue: true,
        showGrowthPercentage: true,
        showBreakdown: true,
        showComparison: true,
        defaultPeriod: "month",
        showPeriodSelector: true,
        abbreviateNumbers: true,
        showViewDetails: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.expense-summary": {
    component: ExpenseSummaryWidget,
    metadata: {
      id: "finance.expense-summary",
      titleKey: "admin:widgets.expenseSummary.title",
      descriptionKey: "admin:widgets.expenseSummary.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTotalExpenses: true,
        showGrowthPercentage: true,
        showBreakdown: true,
        showPendingExpenses: true,
        defaultPeriod: "month",
        showPeriodSelector: true,
        abbreviateNumbers: true,
        showViewDetails: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.net-profit": {
    component: NetProfitWidget,
    metadata: {
      id: "finance.net-profit",
      titleKey: "admin:widgets.netProfit.title",
      descriptionKey: "admin:widgets.netProfit.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showNetProfit: true,
        showGrowthPercentage: true,
        showProfitMargin: true,
        showComparison: true,
        showBreakdown: false,
        defaultPeriod: "month",
        showPeriodSelector: true,
        abbreviateNumbers: true,
        showViewDetails: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.transactions": {
    component: TransactionsWidget,
    metadata: {
      id: "finance.transactions",
      titleKey: "admin:widgets.transactions.title",
      descriptionKey: "admin:widgets.transactions.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        typeFilter: "all",
        statusFilter: "all",
        showViewAll: true,
        enableTap: true,
        showDate: true,
        showStatus: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.pending-payments": {
    component: PendingPaymentsWidget,
    metadata: {
      id: "finance.pending-payments",
      titleKey: "admin:widgets.pendingPayments.title",
      descriptionKey: "admin:widgets.pendingPayments.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showOverdueOnly: false,
        categoryFilter: "all",
        showViewAll: true,
        enableTap: true,
        showDueDate: true,
        showOverdueBadge: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.monthly-chart": {
    component: MonthlyChartWidget,
    metadata: {
      id: "finance.monthly-chart",
      titleKey: "admin:widgets.monthlyChart.title",
      descriptionKey: "admin:widgets.monthlyChart.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultMonths: 6,
        showLegend: true,
        showRevenue: true,
        showExpenses: true,
        showPeriodSelector: true,
        showSummary: true,
        showViewDetails: true,
        abbreviateNumbers: true,
      },
      requiredPermissions: [],
    },
  },

  "finance.category-breakdown": {
    component: CategoryBreakdownWidget,
    metadata: {
      id: "finance.category-breakdown",
      titleKey: "admin:widgets.categoryBreakdown.title",
      descriptionKey: "admin:widgets.categoryBreakdown.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultPeriod: "month",
        defaultType: "revenue",
        showPeriodSelector: true,
        showTypeSelector: true,
        showLegend: true,
        showPercentages: true,
        showTransactionCount: false,
        maxCategories: 5,
        abbreviateNumbers: true,
        showViewDetails: true,
        chartHeight: 200,
      },
      requiredPermissions: [],
    },
  },

  "finance.collection-rate": {
    component: CollectionRateWidget,
    metadata: {
      id: "finance.collection-rate",
      titleKey: "admin:widgets.collectionRate.title",
      descriptionKey: "admin:widgets.collectionRate.subtitle",
      featureId: "admin.finances",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultPeriod: "month",
        showPeriodSelector: true,
        showProgressBar: true,
        showAmounts: true,
        showTrendIndicator: true,
        abbreviateNumbers: true,
        showViewDetails: true,
        thresholdGood: 80,
        thresholdWarning: 60,
      },
      requiredPermissions: [],
    },
  },

  // Admin Fees widgets
  "admin.student-fees-dashboard": {
    component: StudentFeesDashboardWidget,
    metadata: {
      id: "admin.student-fees-dashboard",
      titleKey: "admin:widgets.studentFees.title",
      descriptionKey: "admin:widgets.studentFees.title",
      featureId: "admin.fees",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showCollectionRate: true,
        showTodayStats: true,
        showOverdue: true,
        overdueThresholdDays: 30,
        enableReminder: true,
        cardStyle: "detailed",
      },
      requiredPermissions: [],
    },
  },
  "admin.fee-collection-trend": {
    component: FeeCollectionTrendWidget,
    metadata: {
      id: "admin.fee-collection-trend",
      titleKey: "admin:widgets.feeCollectionTrend.title",
      descriptionKey: "admin:widgets.feeCollectionTrend.title",
      featureId: "admin.fees",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        chartType: "bar",
        showExpected: true,
        showGrowth: true,
        monthsToShow: 6,
        showYearTotal: true,
      },
      requiredPermissions: [],
    },
  },
  "admin.teacher-payroll": {
    component: TeacherPayrollWidget,
    metadata: {
      id: "admin.teacher-payroll",
      titleKey: "admin:widgets.teacherPayroll.title",
      descriptionKey: "admin:widgets.teacherPayroll.title",
      featureId: "admin.payroll",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showProgress: true,
        showNextDue: true,
        showProcessButton: true,
        alertOnOverdue: true,
        overdueDays: 7,
      },
      requiredPermissions: [],
    },
  },
  "admin.batch-performance": {
    component: BatchPerformanceWidget,
    metadata: {
      id: "admin.batch-performance",
      titleKey: "admin:widgets.batchPerformance.title",
      descriptionKey: "admin:widgets.batchPerformance.title",
      featureId: "admin.academic",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        topN: 5,
        showTrend: true,
        showStudentCount: true,
        showOverallAvg: true,
        showRankBadges: true,
        colorCodePerformance: true,
        excellentThreshold: 85,
        goodThreshold: 70,
      },
      requiredPermissions: [],
    },
  },
  "admin.attendance-overview": {
    component: AttendanceOverviewWidget,
    metadata: {
      id: "admin.attendance-overview",
      titleKey: "admin:widgets.attendanceOverview.title",
      descriptionKey: "admin:widgets.attendanceOverview.title",
      featureId: "admin.academic",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTeacherAttendance: true,
        showAbsentList: true,
        absentListLimit: 5,
        showWeeklyTrend: true,
        showAlerts: true,
        lowAttendanceThreshold: 80,
      },
      requiredPermissions: [],
    },
  },
  "admin.admission-stats": {
    component: AdmissionStatsWidget,
    metadata: {
      id: "admin.admission-stats",
      titleKey: "admin:widgets.admissionStats.title",
      descriptionKey: "admin:widgets.admissionStats.title",
      featureId: "admin.academic",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showConversionRate: true,
        showProgramBreakdown: true,
        showPendingFollowUp: true,
        showAddButton: true,
        showTrends: true,
      },
      requiredPermissions: [],
    },
  },

  // ============ TEACHER WIDGETS ============
  "teacher.hero-card": {
    component: TeacherHeroWidget,
    metadata: {
      id: "teacher.hero-card",
      titleKey: "teacher:widgets.teacherHero.title",
      descriptionKey: "teacher:widgets.teacherHero.subtitle",
      featureId: "teacher.dashboard",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showAvatar: true,
        showQuickStats: true,
        showNotificationBadge: true,
        showScheduleButton: true,
        avatarStyle: "circle",
        statsLayout: "horizontal",
      },
      requiredPermissions: [],
    },
  },
  "teacher.stats-grid": {
    component: TeacherStatsWidget,
    metadata: {
      id: "teacher.stats-grid",
      titleKey: "teacher:widgets.teacherStats.title",
      descriptionKey: "teacher:widgets.teacherStats.subtitle",
      featureId: "teacher.dashboard",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTotalStudents: true,
        showClassesToday: true,
        showPendingGrading: true,
        showAttendance: true,
        columns: 2,
        showIcons: true,
        showTrend: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  "teacher.upcoming-classes": {
    component: UpcomingClassesWidget,
    metadata: {
      id: "teacher.upcoming-classes",
      titleKey: "teacher:widgets.upcomingClasses.title",
      descriptionKey: "teacher:widgets.upcomingClasses.subtitle",
      featureId: "teacher.schedule",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showRoom: true,
        showTime: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "teacher.pending-grading": {
    component: PendingGradingWidget,
    metadata: {
      id: "teacher.pending-grading",
      titleKey: "teacher:widgets.pendingGrading.title",
      descriptionKey: "teacher:widgets.pendingGrading.subtitle",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showProgress: true,
        showDueDate: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.recent-grades": {
    component: RecentGradesWidget,
    metadata: {
      id: "teacher.recent-grades",
      titleKey: "teacher:widgets.recentGrades.title",
      descriptionKey: "teacher:widgets.recentGrades.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.grading-stats": {
    component: GradingStatsWidget,
    metadata: {
      id: "teacher.grading-stats",
      titleKey: "teacher:widgets.gradingStats.title",
      descriptionKey: "teacher:widgets.gradingStats.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        showDistribution: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.rubric-templates": {
    component: RubricTemplatesWidget,
    metadata: {
      id: "teacher.rubric-templates",
      titleKey: "teacher:widgets.rubricTemplates.title",
      descriptionKey: "teacher:widgets.rubricTemplates.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 6,
        layoutStyle: "grid",
      },
      refreshable: false,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.grading-actions": {
    component: GradingQuickActionsWidget,
    metadata: {
      id: "teacher.grading-actions",
      titleKey: "teacher:widgets.gradingActions.title",
      descriptionKey: "teacher:widgets.gradingActions.subtitle",
      category: "actions",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        layoutStyle: "row",
      },
      refreshable: false,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.student-stats": {
    component: StudentStatsWidget,
    metadata: {
      id: "teacher.student-stats",
      titleKey: "teacher:widgets.studentStats.title",
      descriptionKey: "teacher:widgets.studentStats.subtitle",
      category: "stats",
      featureId: "teacher.students",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 4,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        showHighlights: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.class-students": {
    component: ClassStudentsWidget,
    metadata: {
      id: "teacher.class-students",
      titleKey: "teacher:widgets.classStudents.title",
      descriptionKey: "teacher:widgets.classStudents.subtitle",
      category: "students",
      featureId: "teacher.students",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxClasses: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.top-performers": {
    component: TopPerformersWidget,
    metadata: {
      id: "teacher.top-performers",
      titleKey: "teacher:widgets.topPerformers.title",
      descriptionKey: "teacher:widgets.topPerformers.subtitle",
      category: "students",
      featureId: "teacher.students",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.student-quick-actions": {
    component: StudentQuickActionsWidget,
    metadata: {
      id: "teacher.student-quick-actions",
      titleKey: "teacher:widgets.studentQuickActions.title",
      descriptionKey: "teacher:widgets.studentQuickActions.subtitle",
      category: "actions",
      featureId: "teacher.students",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        layoutStyle: "grid",
        maxItems: 6,
      },
      refreshable: false,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.grading-hub-actions": {
    component: GradingHubActionsWidget,
    metadata: {
      id: "teacher.grading-hub-actions",
      titleKey: "teacher:widgets.gradingHubActions.title",
      descriptionKey: "teacher:widgets.gradingHubActions.subtitle",
      category: "actions",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        layoutStyle: "grid",
      },
      refreshable: false,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.submissions-list": {
    component: SubmissionsListWidget,
    metadata: {
      id: "teacher.submissions-list",
      titleKey: "teacher:widgets.submissionsList.title",
      descriptionKey: "teacher:widgets.submissionsList.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.grade-submission": {
    component: GradeSubmissionWidget,
    metadata: {
      id: "teacher.grade-submission",
      titleKey: "teacher:widgets.gradeSubmission.title",
      descriptionKey: "teacher:widgets.gradeSubmission.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 1 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {},
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.create-assignment": {
    component: CreateAssignmentWidget,
    metadata: {
      id: "teacher.create-assignment",
      titleKey: "teacher:widgets.createAssignment.title",
      descriptionKey: "teacher:widgets.createAssignment.description",
      category: "actions",
      featureId: "teacher.assignments",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        variant: "card",
        showIcon: true,
        showDescription: true,
      },
      refreshable: false,
      cacheable: false,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "grading.recent": {
    component: GradingRecentWidget,
    metadata: {
      id: "grading.recent",
      titleKey: "dashboard:widgets.gradingRecent.title",
      descriptionKey: "dashboard:widgets.gradingRecent.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showScore: true,
        showPercentage: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "grading.stats": {
    component: GradingStatsWidgetNew,
    metadata: {
      id: "grading.stats",
      titleKey: "dashboard:widgets.gradingStats.title",
      descriptionKey: "dashboard:widgets.gradingStats.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        showDistribution: true,
        showAvgScore: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "grading.rubric-templates": {
    component: RubricTemplatesWidgetNew,
    metadata: {
      id: "grading.rubric-templates",
      titleKey: "dashboard:widgets.rubricTemplates.title",
      descriptionKey: "dashboard:widgets.rubricTemplates.subtitle",
      category: "grading",
      featureId: "teacher.grading",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 6,
        layoutStyle: "grid",
        showCreateButton: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.at-risk-students": {
    component: AtRiskStudentsWidget,
    metadata: {
      id: "teacher.at-risk-students",
      titleKey: "dashboard:widgets.atRiskStudents.title",
      descriptionKey: "dashboard:widgets.atRiskStudents.subtitle",
      category: "progress",
      featureId: "teacher.students",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showMetrics: true,
        showTrend: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.quick-actions": {
    component: TeacherQuickActionsWidget,
    metadata: {
      id: "teacher.quick-actions",
      titleKey: "teacher:widgets.quickActions.title",
      descriptionKey: "teacher:widgets.quickActions.subtitle",
      category: "actions",
      featureId: "teacher.dashboard",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 30 * 60 * 1000, // 30 minutes
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 8,
        columns: 4,
        showLabels: true,
        layoutStyle: "grid",
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  // Communication widgets
  "teacher.messages-inbox": {
    component: MessagesInboxWidget,
    metadata: {
      id: "teacher.messages-inbox",
      titleKey: "teacher:widgets.messagesInbox.title",
      descriptionKey: "teacher:widgets.messagesInbox.subtitle",
      category: "communication",
      featureId: "teacher.communication",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showUnreadBadge: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.announcements": {
    component: TeacherAnnouncementsWidget,
    metadata: {
      id: "teacher.announcements",
      titleKey: "teacher:widgets.announcements.title",
      descriptionKey: "teacher:widgets.announcements.subtitle",
      category: "communication",
      featureId: "teacher.communication",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 3,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.parent-contacts": {
    component: ParentContactsWidget,
    metadata: {
      id: "teacher.parent-contacts",
      titleKey: "teacher:widgets.parentContacts.title",
      descriptionKey: "teacher:widgets.parentContacts.subtitle",
      category: "communication",
      featureId: "teacher.communication",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 10 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showSearch: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  // Doubts & Calendar widgets
  "teacher.doubts-inbox": {
    component: TeacherDoubtsInboxWidget,
    metadata: {
      id: "teacher.doubts-inbox",
      titleKey: "teacher:widgets.doubtsInbox.title",
      descriptionKey: "teacher:widgets.doubtsInbox.subtitle",
      category: "communication",
      featureId: "teacher.doubts",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showFilters: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.doubt-detail": {
    component: TeacherDoubtDetailWidget,
    metadata: {
      id: "teacher.doubt-detail",
      titleKey: "teacher:widgets.doubtDetail.title",
      descriptionKey: "teacher:widgets.doubtDetail.subtitle",
      category: "communication",
      featureId: "teacher.doubts",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {},
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.calendar": {
    component: TeacherCalendarWidget,
    metadata: {
      id: "teacher.calendar",
      titleKey: "teacher:widgets.calendar.title",
      descriptionKey: "teacher:widgets.calendar.subtitle",
      category: "schedule",
      featureId: "teacher.calendar",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showQuickAdd: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.calendar-events": {
    component: CalendarEventsWidget,
    metadata: {
      id: "teacher.calendar-events",
      titleKey: "teacher:widgets.calendarEvents.title",
      descriptionKey: "teacher:widgets.calendarEvents.subtitle",
      category: "schedule",
      featureId: "teacher.calendar-events",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 10,
        showFilters: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.substitute-manager": {
    component: SubstituteManagerWidget,
    metadata: {
      id: "teacher.substitute-manager",
      titleKey: "teacher:widgets.substituteManager.title",
      descriptionKey: "teacher:widgets.substituteManager.subtitle",
      category: "schedule",
      featureId: "teacher.substitute-manager",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 3,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: false,
      requiredPermissions: [],
    },
  },

  "teacher.leave-request": {
    component: LeaveRequestWidget,
    metadata: {
      id: "teacher.leave-request",
      titleKey: "teacher:widgets.leaveRequest.title",
      descriptionKey: "teacher:widgets.leaveRequest.subtitle",
      category: "schedule",
      featureId: "teacher.leave-request",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showBalance: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: false,
      requiredPermissions: [],
    },
  },

  "teacher.ai-insights": {
    component: AiInsightsWidget,
    metadata: {
      id: "teacher.ai-insights",
      titleKey: "teacher:widgets.aiInsights.title",
      descriptionKey: "teacher:widgets.aiInsights.subtitle",
      category: "ai",
      featureId: "teacher.ai-insights",
      roles: ["teacher"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showPriorityBadge: true,
        showUnreadCount: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "class.cards": {
    component: ClassCardsWidget,
    metadata: {
      id: "class.cards",
      titleKey: "teacher:widgets.classCards.title",
      descriptionKey: "teacher:widgets.classCards.subtitle",
      category: "schedule",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 10 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 6,
        columns: 2,
        showStudentCount: true,
        showSubject: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "class.roster": {
    component: ClassRosterWidget,
    metadata: {
      id: "class.roster",
      titleKey: "teacher:widgets.classRoster.title",
      descriptionKey: "teacher:widgets.classRoster.subtitle",
      category: "schedule",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 10,
        showSearch: true,
        showAttendance: true,
        showScore: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "class.stats": {
    component: ClassStatsWidget,
    metadata: {
      id: "class.stats",
      titleKey: "teacher:widgets.classStats.title",
      descriptionKey: "teacher:widgets.classStats.subtitle",
      category: "analytics",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        layoutStyle: "grid",
        columns: 2,
        showTrends: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "class.activity": {
    component: ClassActivityWidget,
    metadata: {
      id: "class.activity",
      titleKey: "teacher:widgets.classActivity.title",
      descriptionKey: "teacher:widgets.classActivity.subtitle",
      category: "schedule",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "compact",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showTimestamp: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "class.recentActivity": {
    component: ClassRecentActivityWidget,
    metadata: {
      id: "class.recentActivity",
      titleKey: "teacher:widgets.activityTimeline.title",
      descriptionKey: "teacher:widgets.activityTimeline.subtitle",
      category: "schedule",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 7,
        showFilter: true,
        showClassName: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "teacher.classOverview": {
    component: ClassOverviewWidget,
    metadata: {
      id: "teacher.classOverview",
      titleKey: "teacher:widgets.classOverview.title",
      descriptionKey: "teacher:widgets.classOverview.subtitle",
      category: "schedule",
      featureId: "teacher.classes",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxStudentsPerClass: 3,
        attendanceThreshold: 75,
        scoreThreshold: 60,
        showQuickActions: true,
        expandedByDefault: false,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  // Teacher Attendance widgets
  "teacher.attendanceHero": {
    component: AttendanceHeroWidget,
    metadata: {
      id: "teacher.attendanceHero",
      titleKey: "teacher:widgets.attendanceHero.title",
      descriptionKey: "teacher:widgets.attendanceHero.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {},
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.attendanceQuickActions": {
    component: AttendanceQuickActionsWidget,
    metadata: {
      id: "teacher.attendanceQuickActions",
      titleKey: "teacher:widgets.attendanceQuickActions.title",
      descriptionKey: "teacher:widgets.attendanceQuickActions.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "compact",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 0,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        columns: 4,
      },
      refreshable: false,
      cacheable: false,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.attendanceRecent": {
    component: AttendanceRecentWidget,
    metadata: {
      id: "teacher.attendanceRecent",
      titleKey: "teacher:widgets.attendanceRecent.title",
      descriptionKey: "teacher:widgets.attendanceRecent.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.attendanceTrends": {
    component: AttendanceTrendsWidget,
    metadata: {
      id: "teacher.attendanceTrends",
      titleKey: "teacher:widgets.attendanceTrends.title",
      descriptionKey: "teacher:widgets.attendanceTrends.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        defaultRange: "month",
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.attendanceClassCompare": {
    component: AttendanceClassCompareWidget,
    metadata: {
      id: "teacher.attendanceClassCompare",
      titleKey: "teacher:widgets.attendanceClassCompare.title",
      descriptionKey: "teacher:widgets.attendanceClassCompare.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        sortBy: "rate",
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "teacher.attendanceLowAlerts": {
    component: AttendanceLowAlertsWidget,
    metadata: {
      id: "teacher.attendanceLowAlerts",
      titleKey: "teacher:widgets.attendanceLowAlerts.title",
      descriptionKey: "teacher:widgets.attendanceLowAlerts.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        threshold: 75,
        maxItems: 5,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  "attendance.today-summary": {
    component: AttendanceTodaySummaryWidget,
    metadata: {
      id: "attendance.today-summary",
      titleKey: "teacher:widgets.attendanceTodaySummary.title",
      descriptionKey: "teacher:widgets.attendanceTodaySummary.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "compact",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        showChart: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "attendance.quick-mark": {
    component: AttendanceQuickMarkWidget,
    metadata: {
      id: "attendance.quick-mark",
      titleKey: "teacher:widgets.attendanceQuickMark.title",
      descriptionKey: "teacher:widgets.attendanceQuickMark.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showStudentCount: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "attendance.trends": {
    component: AttendanceTrendsCompactWidget,
    metadata: {
      id: "attendance.trends",
      titleKey: "teacher:widgets.attendanceTrendsCompact.title",
      descriptionKey: "teacher:widgets.attendanceTrendsCompact.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "compact",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        showComparison: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "attendance.alerts": {
    component: AttendanceAlertsWidget,
    metadata: {
      id: "attendance.alerts",
      titleKey: "teacher:widgets.attendanceAlerts.title",
      descriptionKey: "teacher:widgets.attendanceAlerts.subtitle",
      category: "attendance",
      featureId: "teacher.attendance",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        threshold: 75,
        showActions: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  // Legacy/Alias widget IDs (mapped from database entries)
  // These ensure backward compatibility with existing screen_layouts
  "schedule.upcoming-class": {
    component: UpcomingClassesWidget,
    metadata: {
      id: "schedule.upcoming-class",
      titleKey: "teacher:widgets.upcomingClasses.title",
      descriptionKey: "teacher:widgets.upcomingClasses.subtitle",
      featureId: "teacher.schedule",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: true, // Use teacher.upcoming-classes instead
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
        offlineBehavior: "show-cached",
      },
      defaultConfig: {
        maxItems: 5,
        showRoom: true,
        showTime: true,
      },
      refreshable: true,
      cacheable: true,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "teacher.class-performance": {
    component: PlaceholderWidget,
    metadata: {
      id: "teacher.class-performance",
      titleKey: "teacher:widgets.classPerformance.title",
      descriptionKey: "teacher:widgets.classPerformance.subtitle",
      featureId: "teacher.analytics",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-placeholder",
      },
      defaultConfig: {
        title: "Class Performance",
        icon: "chart-line",
        message: "Analytics coming soon",
      },
      refreshable: false,
      cacheable: false,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },
  "doubts.to-answer": {
    component: PlaceholderWidget,
    metadata: {
      id: "doubts.to-answer",
      titleKey: "teacher:widgets.doubtsToAnswer.title",
      descriptionKey: "teacher:widgets.doubtsToAnswer.subtitle",
      featureId: "teacher.doubts",
      roles: ["teacher"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 0,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: false,
        offlineBehavior: "show-placeholder",
      },
      defaultConfig: {
        title: "Doubts to Answer",
        icon: "help-circle-outline",
        message: "Student doubts coming soon",
      },
      refreshable: false,
      cacheable: false,
      offlineCapable: true,
      requiredPermissions: [],
    },
  },

  // Admin Analytics widgets
  "analytics.trends": {
    component: TrendsWidget,
    metadata: {
      id: "analytics.trends",
      titleKey: "admin:widgets.trends.title",
      descriptionKey: "admin:widgets.trends.subtitle",
      featureId: "admin.analytics",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultMetric: "users",
        defaultPeriod: "week",
        showMetricSelector: true,
        showPeriodSelector: true,
        showChangeIndicator: true,
        showStatistics: true,
        showViewDetails: true,
        abbreviateNumbers: true,
        chartHeight: 180,
      },
      requiredPermissions: [],
    },
  },

  "analytics.engagement": {
    component: EngagementWidget,
    metadata: {
      id: "analytics.engagement",
      titleKey: "admin:widgets.engagement.title",
      descriptionKey: "admin:widgets.engagement.subtitle",
      featureId: "admin.analytics",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultPeriod: "week",
        showPeriodSelector: true,
        showMetricsGrid: true,
        showActivityChart: true,
        showTopUsers: true,
        showRoleBreakdown: true,
        showViewDetails: true,
        maxTopUsers: 3,
        chartHeight: 160,
      },
      requiredPermissions: [],
    },
  },

  "analytics.growth": {
    component: GrowthWidget,
    metadata: {
      id: "analytics.growth",
      titleKey: "admin:widgets.growth.title",
      descriptionKey: "admin:widgets.growth.subtitle",
      featureId: "admin.analytics",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultPeriod: "week",
        showPeriodSelector: true,
        showOverallGrowth: true,
        showMetricsGrid: true,
        showTargetProgress: true,
        showTrendChart: true,
        showHighlights: true,
        showViewDetails: true,
        abbreviateNumbers: true,
        chartHeight: 140,
        maxMetrics: 4,
      },
      requiredPermissions: [],
    },
  },

  "analytics.comparisons": {
    component: ComparisonsWidget,
    metadata: {
      id: "analytics.comparisons",
      titleKey: "admin:widgets.comparisons.title",
      descriptionKey: "admin:widgets.comparisons.subtitle",
      featureId: "admin.analytics",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        defaultPeriod: "week",
        showPeriodSelector: true,
        showSummary: true,
        showComparisonCards: true,
        showViewDetails: true,
        abbreviateNumbers: true,
        maxMetrics: 5,
      },
      requiredPermissions: [],
    },
  },

  // Admin Content widgets
  "content.stats": {
    component: ContentStatsWidget,
    metadata: {
      id: "content.stats",
      titleKey: "admin:widgets.contentStats.title",
      descriptionKey: "admin:widgets.contentStats.subtitle",
      featureId: "admin.content",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showTypeBreakdown: true,
        showStatusBreakdown: true,
        showViewDetails: true,
        abbreviateNumbers: true,
        maxTypes: 4,
      },
      requiredPermissions: [],
    },
  },

  "content.list": {
    component: ContentListWidget,
    metadata: {
      id: "content.list",
      titleKey: "admin:widgets.contentList.title",
      descriptionKey: "admin:widgets.contentList.subtitle",
      featureId: "admin.content",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 10,
        showSearch: true,
        showFilters: true,
        showTypeFilter: true,
        showStatusFilter: true,
        showViews: true,
        showRating: true,
        showDuration: true,
        showCategory: true,
        enableTap: true,
        defaultTypeFilter: null,
        defaultStatusFilter: null,
      },
      requiredPermissions: [],
    },
  },

  "content.categories": {
    component: ContentCategoriesWidget,
    metadata: {
      id: "content.categories",
      titleKey: "admin:widgets.contentCategories.title",
      descriptionKey: "admin:widgets.contentCategories.subtitle",
      featureId: "admin.content",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxCategories: 8,
        layoutStyle: "grid",
        showCount: true,
        showViews: true,
        showRating: true,
        showPublished: false,
        showViewAll: true,
        enableTap: true,
        columns: 2,
      },
      requiredPermissions: [],
    },
  },

  // Admin Organization widgets
  "org.tree": {
    component: OrgTreeWidget,
    metadata: {
      id: "org.tree",
      titleKey: "admin:widgets.orgTree.title",
      descriptionKey: "admin:widgets.orgTree.subtitle",
      featureId: "admin.organization",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxDepth: 4,
        showMemberCount: true,
        showDescription: false,
        showStats: true,
        expandedByDefault: true,
        enableTap: true,
        showViewAll: true,
        compactMode: false,
      },
      requiredPermissions: [],
    },
  },

  "org.class-list": {
    component: ClassListWidget,
    metadata: {
      id: "org.class-list",
      titleKey: "admin:widgets.classList.title",
      descriptionKey: "admin:widgets.classList.subtitle",
      featureId: "admin.organization",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 2,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        maxItems: 5,
        showSearch: true,
        showMemberCount: true,
        showDepartment: true,
        showDescription: false,
        showStatus: true,
        showViewAll: true,
        compactMode: false,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },

  "org.quick-create": {
    component: QuickCreateWidget,
    metadata: {
      id: "org.quick-create",
      titleKey: "admin:widgets.quickCreate.title",
      descriptionKey: "admin:widgets.quickCreate.subtitle",
      featureId: "admin.organization",
      roles: ["admin", "super_admin"],
      requiresOnline: true,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: false,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        showOrganization: true,
        showDepartment: true,
        showClass: true,
        showBatch: true,
        compactMode: false,
        columns: 2,
        showDescription: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },

  // ============ ADMIN PROFILE WIDGETS ============
  "profile.activity": {
    component: AdminProfileActivityWidget,
    metadata: {
      id: "profile.activity",
      titleKey: "admin:widgets.profileActivity.title",
      descriptionKey: "admin:widgets.profileActivity.subtitle",
      featureId: "admin.profile",
      roles: ["admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 2 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        layoutStyle: "timeline",
        maxItems: 10,
        showTodayStats: true,
        showTime: true,
        showGroupHeaders: true,
        showIcon: true,
        showDescription: true,
        showIpAddress: false,
        compactMode: false,
        enableTap: true,
        showViewAll: true,
        typeFilter: "all",
      },
      requiredPermissions: [],
    },
  },

  // ============ COMMON/UNIVERSAL WIDGETS ============
  "media.banner": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.banner",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: {
        maxQueries: 1,
        staleTimeMs: 5 * 60 * 1000,
        prefetchOnDashboardLoad: true,
        allowBackgroundRefresh: true,
      },
      defaultConfig: {
        mediaType: "image",
        mediaUrl: "",
        title: "",
        subtitle: "",
        ctaText: "",
        ctaAction: "navigate",
        ctaUrl: "",
        aspectRatio: "16:9",
        borderRadius: 12,
        fullWidth: false,
        showOverlay: true,
        overlayGradient: true,
        autoPlay: true,
        autoPlayInterval: 5000,
        loop: true,
        showPlayButton: true,
        showIndicators: true,
        showControls: true,
        enableTap: true,
      },
      requiredPermissions: [],
    },
  },
  // Aliased media banners for multiple instances on same screen
  "media.banner-1": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.banner-1",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: true, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "image", aspectRatio: "16:9", borderRadius: 12, showOverlay: true, overlayGradient: true, autoPlay: true, loop: true, enableTap: true },
      requiredPermissions: [],
    },
  },
  "media.banner-2": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.banner-2",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: true, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "image", aspectRatio: "16:9", borderRadius: 12, showOverlay: true, overlayGradient: true, autoPlay: true, loop: true, enableTap: true },
      requiredPermissions: [],
    },
  },
  "media.banner-3": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.banner-3",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: true, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "image", aspectRatio: "16:9", borderRadius: 12, showOverlay: true, overlayGradient: true, autoPlay: true, loop: true, enableTap: true },
      requiredPermissions: [],
    },
  },
  "media.hero": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.hero",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "expanded",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: true, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "image", aspectRatio: "21:9", borderRadius: 0, fullWidth: true, showOverlay: true, overlayGradient: true, enableTap: true },
      requiredPermissions: [],
    },
  },
  "media.promo": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.promo",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard", "expanded"],
      defaultSize: "standard",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: true, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "carousel", aspectRatio: "16:9", borderRadius: 12, showOverlay: true, overlayGradient: true, autoPlay: true, autoPlayInterval: 4000, loop: true, showIndicators: true, enableTap: true },
      requiredPermissions: [],
    },
  },
  "media.ad": {
    component: MediaBannerWidget,
    metadata: {
      id: "media.ad",
      titleKey: "common:widgets.mediaBanner.title",
      descriptionKey: "common:widgets.mediaBanner.subtitle",
      featureId: "common.media",
      roles: ["student", "teacher", "parent", "admin", "super_admin"],
      requiresOnline: false,
      deprecated: false,
      version: "1.0.0",
      supportedSizes: ["compact", "standard"],
      defaultSize: "compact",
      dataPolicy: { maxQueries: 1, staleTimeMs: 5 * 60 * 1000, prefetchOnDashboardLoad: false, allowBackgroundRefresh: true },
      defaultConfig: { mediaType: "image", aspectRatio: "4:3", borderRadius: 8, showOverlay: true, overlayGradient: true, enableTap: true },
      requiredPermissions: [],
    },
  },

  // Legacy long IDs (for backward compatibility)
  "home.dashboard.heroCard": {
    component: HeroCardWidget,
    metadata: buildMetadata("home.dashboard.heroCard", "dashboard:widgets.heroCard.title", "dashboard:widgets.heroCard.subtitle", "home.dashboard"),
  },
  "home.dashboard.todaySchedule": {
    component: TodayScheduleWidget,
    metadata: buildMetadata("home.dashboard.todaySchedule", "dashboard:widgets.todaySchedule.title", "dashboard:widgets.todaySchedule.subtitle", "home.dashboard"),
  },
  "home.dashboard.quickActions": {
    component: QuickActionsWidget,
    metadata: buildMetadata("home.dashboard.quickActions", "dashboard:widgets.quickActions.title", "dashboard:widgets.quickActions.subtitle", "home.dashboard"),
  },
  "home.dashboard.assignmentsTests": {
    component: AssignmentsTestsWidget,
    metadata: buildMetadata("home.dashboard.assignmentsTests", "dashboard:widgets.assignmentsTests.title", "dashboard:widgets.assignmentsTests.subtitle", "study.assignments"),
  },
  "home.dashboard.doubtsInbox": {
    component: DoubtsInboxWidget,
    metadata: buildMetadata("home.dashboard.doubtsInbox", "dashboard:widgets.doubtsInbox.title", "dashboard:widgets.doubtsInbox.subtitle", "ask.doubts"),
  },
  "home.dashboard.progressSnapshot": {
    component: ProgressSnapshotWidget,
    metadata: buildMetadata("home.dashboard.progressSnapshot", "dashboard:widgets.progressSnapshot.title", "dashboard:widgets.progressSnapshot.subtitle", "progress.analytics"),
  },
  "home.dashboard.recommendations": {
    component: RecommendationsWidget,
    metadata: buildMetadata("home.dashboard.recommendations", "dashboard:widgets.recommendations.title", "dashboard:widgets.recommendations.subtitle", "ai.tutor", ["ai.tutor.use"]),
  },
  "home.dashboard.classFeed": {
    component: ClassFeedWidget,
    metadata: buildMetadata("home.dashboard.classFeed", "dashboard:widgets.classFeed.title", "dashboard:widgets.classFeed.subtitle", "home.dashboard"),
  },
  "home.dashboard.peersGroups": {
    component: PeersGroupsWidget,
    metadata: buildMetadata("home.dashboard.peersGroups", "dashboard:widgets.peersGroups.title", "dashboard:widgets.peersGroups.subtitle", "peers.network"),
  },
  // Settings widgets
  "settings.account": {
    component: SettingsAccountWidget,
    metadata: buildMetadata("settings.account", "settings:sections.account", "settings:sections.accountDesc", "settings"),
  },
  "settings.notifications": {
    component: SettingsNotificationsWidget,
    metadata: buildMetadata("settings.notifications", "settings:sections.notifications", "settings:sections.notificationsDesc", "settings"),
  },
  "settings.appearance": {
    component: SettingsAppearanceWidget,
    metadata: buildMetadata("settings.appearance", "settings:sections.appearance", "settings:sections.appearanceDesc", "settings"),
  },
  "settings.about": {
    component: SettingsAboutWidget,
    metadata: buildMetadata("settings.about", "settings:sections.about", "settings:sections.aboutDesc", "settings"),
  },
  "settings.logout": {
    component: SettingsLogoutWidget,
    metadata: buildMetadata("settings.logout", "settings:logout.button", "settings:logout.message", "settings"),
  },
};

export function getWidgetRegistry() {
  return registry;
}

export function getWidgetEntry(widgetId: WidgetId): WidgetRegistryEntry | undefined {
  return registry[widgetId];
}

function buildMetadata(
  id: WidgetId,
  titleKey: string,
  descriptionKey: string,
  featureId: string,
  requiredPermissions: string[] = []
): WidgetMetadata {
  return {
    id,
    titleKey,
    descriptionKey,
    featureId,
    roles: ["student", "teacher", "parent", "admin"], // Allow all roles by default
    requiresOnline: false, // Don't require online by default
    deprecated: false,
    version: "1.0.0",
    dataPolicy: {
      maxQueries: 2,
      staleTimeMs: 5 * 60 * 1000,
      prefetchOnDashboardLoad: true,
      allowBackgroundRefresh: true,
    },
    defaultConfig: {},
    requiredPermissions: [], // Don't require permissions by default
  };
}
